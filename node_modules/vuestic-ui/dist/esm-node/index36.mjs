import{w as e}from"./withConfigTransport.mjs";import{defineComponent as l,ref as a,computed as t,onMounted as r,onBeforeUnmount as o,openBlock as u,createElementBlock as v,normalizeStyle as n,createElementVNode as i,renderSlot as s}from"vue";import"./VaConfig.mjs";import"./global-config.mjs";var d=l({name:"VaParallax",props:{target:{type:[Object,String]},src:{type:String,default:"",required:!0},alt:{type:String,default:"parallax"},height:{type:Number,default:400},reversed:{type:Boolean,default:!1},speed:{type:Number,default:.5,validator:e=>e>=0&&e<=1}},setup(e){const l=a(0),u=a(0),v=a(0),n=a(0),i=a(0),s=a(0),d=a(0),p=a(!1),c=t((()=>({height:e.height+"px"}))),m=t((()=>({display:"block",transform:`translate(-50%, ${u.value}px)`,opacity:p.value?1:0,top:e.reversed?0:"auto"}))),g=a(null),f=t((()=>{var l;if("string"!=typeof e.target)return getScrollableParent(null===(l=g.value)||void 0===l?void 0:l.parentElement);const a=document.querySelector(e.target);if(a)return a;throw new Error("VaParallax target prop got wrong selector. Target is null")})),getScrollableParent=e=>e?e.scrollHeight>e.clientHeight?e:getScrollableParent(e.parentElement):document.body,h=a(null),y=t((()=>{var e;return(null===(e=h.value)||void 0===e?void 0:e.naturalHeight)||0})),translate=()=>{(()=>{var a,t;const r=(null===(a=g.value)||void 0===a?void 0:a.getBoundingClientRect())||{top:0};i.value=(null===(t=f.value)||void 0===t?void 0:t.scrollTop)||0,v.value=y.value-e.height,l.value=r.top+i.value,s.value=window.innerHeight,d.value=i.value+s.value})(),n.value=(d.value-l.value)/(e.height+s.value),u.value=Math.round(v.value*n.value)*e.speed,e.reversed&&(u.value=-u.value)},addEventListeners=()=>{var e,l;null===(e=f.value)||void 0===e||e.addEventListener("scroll",translate),null===(l=f.value)||void 0===l||l.addEventListener("resize",translate)};return r((()=>{var e,l;(null===(e=h.value)||void 0===e?void 0:e.complete)?(translate(),addEventListeners()):null===(l=h.value)||void 0===l||l.addEventListener("load",(()=>{translate(),addEventListeners()}),!1),p.value=!0})),o((()=>{var e,l;null===(e=f.value)||void 0===e||e.removeEventListener("scroll",translate),null===(l=f.value)||void 0===l||l.removeEventListener("resize",translate)})),{img:h,rootElement:g,computedWrapperStyles:c,computedImgStyles:m}}});const p={class:"va-parallax__image-container"},c=["src","alt"],m={class:"va-parallax__item-container"};d.render=function render(e,l,a,t,r,o){return u(),v("div",{class:"va-parallax",style:n(e.computedWrapperStyles),ref:"rootElement"},[i("div",p,[i("img",{class:"va-parallax__image",ref:"img",src:e.$props.src,alt:e.$props.alt,style:n(e.computedImgStyles)},null,12,c)]),i("div",m,[s(e.$slots,"default")])],4)},d.__file="src/components/va-parallax/VaParallax.vue";var g=e(d);export{g as default};
//# sourceMappingURL=index36.mjs.map
