import{watch as e,inject as r,onMounted as s,onBeforeUnmount as a,defineComponent as o,computed as t,openBlock as l,createElementBlock as u,normalizeStyle as i,Fragment as n,renderList as m,toDisplayString as d,createCommentVNode as p}from"vue";import{f as c}from"./flatten.mjs";import{p as f,i as g,q as v,r as y}from"./global-config.mjs";import{u as V}from"./useSyncProp.mjs";import{F as S}from"./consts.mjs";import{u as j}from"./useFocus.mjs";import{w as M}from"./withConfigTransport.mjs";import{a as h}from"./useColor.mjs";var A=f,C=g,b=v;var B=function isString(e){return"string"==typeof e||!C(e)&&b(e)&&"[object String]"==A(e)};const F={modelValue:{required:!1},error:{type:Boolean,default:void 0},errorMessages:{type:[Array,String],default:void 0},errorCount:{type:[String,Number],default:1},rules:{type:Array,default:()=>[]},success:{type:Boolean,default:!1},messages:{type:[Array,String],default:()=>[]},immediateValidation:{type:Boolean,default:!1}},E=["update:error","update:errorMessages"],useValidation=(o,t,l,u)=>{const{isFocused:i,onFocus:n,onBlur:m}=j(),[d]=V("error",o,t,!1),[p]=V("errorMessages",o,t,[]),resetValidation=()=>{d.value=!1,p.value=[]},validate=()=>{if(!o.rules||!o.rules.length)return!0;let e=!1,r=[];return((e=[],r=null)=>(B(e)&&(e=[e]),e.map((e=>y(e)?e(r):e))))(c(o.rules),o.modelValue).forEach((s=>{B(s)?(r=[...r,s],e=!0):!1===s&&(e=!0)})),p.value=r,d.value=e,!e};e(i,(e=>!e&&validate())),e((()=>o.modelValue),(()=>validate()),{immediate:o.immediateValidation});const f={resetValidation:resetValidation,focus:u,validate:validate,reset:l,hasError:()=>d.value},g=r(S,void 0);return s((()=>{null==g||g.onChildMounted(f)})),a((()=>{null==g||g.onChildUnmounted(f)})),{computedError:d,computedErrorMessages:p,listeners:{onFocus:n,onBlur:m},validate:validate,resetValidation:resetValidation}};var _=o({name:"VaMessageList",props:{modelValue:{type:[String,Array],default:""},limit:{type:Number,default:1},color:{type:String}},setup(e){const{colorComputed:r}=h(e);return{messages:t((()=>e.modelValue?Array.isArray(e.modelValue)?e.modelValue.slice(0,e.limit):[e.modelValue]:[])),computedStyle:t((()=>e.color?{color:r.value}:{}))}}});_.render=function render(e,r,s,a,o,t){return e.messages.length?(l(),u("div",{key:0,class:"va-message-list",style:i(e.computedStyle)},[(l(!0),u(n,null,m(e.messages,((e,r)=>(l(),u("div",{key:r,class:"va-message-list__message"},d(e),1)))),128))],4)):p("v-if",!0)},_.__file="src/components/va-input/components/VaMessageList/VaMessageList.vue";var L=M(_);export{L as V,useValidation as a,F as b,E as u};
//# sourceMappingURL=index66.mjs.map
