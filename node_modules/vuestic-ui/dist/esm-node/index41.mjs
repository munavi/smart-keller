import{w as e}from"./withConfigTransport.mjs";import{ref as o,computed as t,getCurrentInstance as a,defineComponent as r,watch as n,resolveComponent as l,openBlock as u,createElementBlock as s,withKeys as m,renderSlot as i,createVNode as p,normalizeStyle as d,toDisplayString as c,normalizeClass as v,createElementVNode as f,Fragment as g,renderList as b,createBlock as V,mergeProps as y,createSlots as C,withCtx as I,createCommentVNode as L}from"vue";import{c as M}from"./clamp.mjs";import{u as h}from"./useHover.mjs";import{a as x,b as N}from"./useStateful.mjs";import{u as k}from"./color-config.mjs";import{u as F,a as R}from"./useForm.mjs";import{f as E,e as _}from"./child-props.mjs";import{u as j}from"./useSyncProp.mjs";import U from"./index28.mjs";import{u as P,a as S}from"./useSize.mjs";import"./VaConfig.mjs";import"./global-config.mjs";import"./toNumber.mjs";import"./isSymbol.mjs";import"colortranslator";import"./VaIcon.mjs";import"./flatten.mjs";var $;!function(e){e[e.EMPTY=0]="EMPTY",e[e.HALF=.5]="HALF",e[e.FULL=1]="FULL"}($||($={}));const H={...x,modelValue:{type:Number,default:0},clearable:{type:Boolean,default:!1},hover:{type:Boolean,default:!1}},useRating=e=>{const{emit:r}=(()=>{const e=a();if(!e)throw new Error("useRating hooks must be used on top of setup function");return{props:e.props,emit:e.emit}})(),{isHovered:n,onMouseEnter:l,onMouseLeave:u}=h(),{valueComputed:s}=N(e,r),m=o(0),i=t((()=>e.hover&&n.value?m.value:s.value));return{visibleValue:i,modelValue:s,hoveredValue:m,isHovered:n,onMouseEnter:l,onMouseLeave:u,onItemValueUpdate:(o,t)=>{const a=o+t;e.clearable&&s.value===a?s.value=0:s.value=a},onItemHoveredValueUpdate:(o,t)=>{e.hover&&(m.value=o+t)},getItemValue:e=>{const o=i.value-e;return M(o,$.EMPTY,$.FULL)}}},B={unselectedColor:{type:String},color:{type:String,default:"primary"},modelValue:{type:Number}},useVaRatingColors=e=>{const{getColor:o,getFocusColor:a,getTextColor:r}=k(),n=t((()=>o(e.color))),l=t((()=>e.unselectedColor?o(e.unselectedColor):a(o(e.color)))),u=t((()=>e.modelValue===$.HALF?`linear-gradient(90deg, ${n.value} 50%, ${l.value} 50%`:e.modelValue===$.EMPTY?l.value:n.value)),s=t((()=>e.modelValue===$.FULL?r(n.value):r(l.value)));return{computedColor:n,backgroundComputed:u,textColorComputed:s}};var w=r({name:"VaRatingItem",components:{VaIcon:U},props:{modelValue:{type:Number,default:0},icon:{type:String,default:"star"},halfIcon:{type:String,default:"star_half"},emptyIcon:{type:String,default:"star_outline"},halves:{type:Boolean,default:!1},hover:{type:Boolean,default:!1},tabindex:{type:Number,default:1},size:{type:[String,Number],default:"medium"},emptyIconColor:{type:String},color:{type:String,default:"primary"}},emits:["update:modelValue","click","hover"],setup(e,{emit:a}){const r=o(),[l]=j("modelValue",e,a,$.EMPTY),u=o(null),s=t((()=>e.hover&&u.value||l.value));return n(u,(()=>a("hover",u.value||$.EMPTY))),{...k(),rootEl:r,onEnter:()=>{l.value=1},onClick:()=>{l.value=u.value||$.FULL,a("click",u.value||$.FULL)},onMouseMove:o=>{if(!r.value)return;const{offsetX:t}=o,a=r.value.clientWidth;e.halves?u.value=t/a<=$.HALF?$.HALF:$.FULL:u.value=$.FULL},onMouseLeave:()=>{u.value=null},visibleValue:s,computedIconName:t((()=>e.halves&&s.value===$.HALF?e.halfIcon:s.value===$.EMPTY?e.emptyIcon:e.icon))}}});const A=["tabindex"];w.render=function render$2(e,o,t,a,r,n){const d=l("va-icon");return u(),s("div",{ref:"rootEl",class:"va-rating-item",tabindex:e.$props.tabindex,onKeyup:o[0]||(o[0]=m(((...o)=>e.onClick&&e.onClick(...o)),["enter"])),onMousemove:o[1]||(o[1]=(...o)=>e.onMouseMove&&e.onMouseMove(...o)),onMouseleave:o[2]||(o[2]=(...o)=>e.onMouseLeave&&e.onMouseLeave(...o))},[i(e.$slots,"default",{props:{value:e.visibleValue,onClick:e.onClick}},(()=>[p(d,{class:"va-rating-item__wrapper",tabindex:"-1",tag:"button",name:e.computedIconName,size:e.$props.size,color:e.getColor(e.$props.color),onClick:e.onClick},null,8,["name","size","color","onClick"])]))],40,A)},w.__file="src/components/va-rating/components/VaRatingItem/VaRatingItem.vue";var z=r({name:"VaRatingItemNumberButton",props:{...B,...P,itemNumber:{type:Number,required:!0},modelValue:{type:Number,required:!0}},setup:e=>({...useVaRatingColors(e),...S(e,"VaRating")})});z.render=function render$1(e,o,t,a,r,n){return u(),s("button",{class:"va-rating__number-item",tabindex:"-1",style:d({background:e.backgroundComputed,color:e.textColorComputed,width:e.sizeComputed,height:e.sizeComputed,fontSize:e.fontSizeComputed,borderRadius:.125*parseInt(e.fontSizeComputed)+"rem"})},c(e.itemNumber),5)},z.__file="src/components/va-rating/components/VaRatingItemNumberButton.vue";const T=_(w,["unselectedColor"]),Y=_(z,["modelValue","itemNumber"]);var K=r({name:"VaRating",props:{...H,...B,...F,...T,...Y,numbers:{type:Boolean,default:!1},halves:{type:Boolean,default:!1},max:{type:Number,default:5},texts:{type:Array,default:()=>[]}},emits:["update:modelValue"],components:{VaRatingItem:w,VaRatingItemNumberButton:z},setup(e){const{createComputedClass:o}=R(e),a=useRating(e),r=t((()=>!e.disabled&&!e.readonly));return{...useVaRatingColors(e),...a,rootClass:o("va-rating"),VaRatingItemProps:E(e,T),VaRatingItemNumberButtonProps:E(e,Y),isInteractionsEnabled:r,tabindex:t((()=>r.value?0:void 0)),onArrowKeyPress:o=>{const t=e.halves?$.HALF:$.FULL;a.onItemValueUpdate(a.visibleValue.value,t*o)}}}});K.render=function render(e,o,t,a,r,n){const i=l("VaRatingItemNumberButton"),M=l("va-rating-item");return u(),s("div",{class:v(["va-rating",e.rootClass])},[f("div",{onKeyup:[o[0]||(o[0]=m((o=>e.onArrowKeyPress(-1)),["left"])),o[1]||(o[1]=m((o=>e.onArrowKeyPress(1)),["right"]))],onMouseenter:o[2]||(o[2]=o=>e.onMouseEnter()),onMouseleave:o[3]||(o[3]=(...o)=>e.onMouseLeave&&e.onMouseLeave(...o)),class:"va-rating__item-wrapper"},[(u(!0),s(g,null,b(e.$props.max,(o=>(u(),V(M,y(e.VaRatingItemProps,{"model-value":e.getItemValue(o-1),key:o,"empty-icon-color":e.$props.unselectedColor,tabindex:e.tabindex,onHover:t=>e.isInteractionsEnabled&&e.onItemHoveredValueUpdate(o-1,t),"onUpdate:modelValue":t=>e.isInteractionsEnabled&&e.onItemValueUpdate(o-1,t)}),C({_:2},[e.$props.numbers?{name:"default",fn:I((({props:t})=>[p(i,y(e.VaRatingItemNumberButtonProps,{"model-value":t.value,"item-number":o,onClick:t.onClick}),null,16,["model-value","item-number","onClick"])]))}:void 0]),1040,["model-value","empty-icon-color","tabindex","onHover","onUpdate:modelValue"])))),128))],32),e.$props.texts&&e.$props.texts.length===e.$props.max?(u(),s("span",{key:0,class:"va-rating__text-wrapper",style:d({color:e.computedColor})},c(e.$props.texts[Math.round(e.visibleValue)-1]),5)):L("v-if",!0)],2)},K.__file="src/components/va-rating/VaRating.vue";var q=e(w),W=e(K);export{q as VaRatingItem,W as default};
//# sourceMappingURL=index41.mjs.map
