import{w as e}from"./withConfigTransport.mjs";import{defineComponent as t,ref as n,computed as o,resolveComponent as s,openBlock as a,createBlock as r,mergeProps as u,withKeys as i,withModifiers as l,createSlots as p,withCtx as c,createElementBlock as m,createCommentVNode as d,createElementVNode as v,normalizeStyle as f,renderSlot as C,normalizeProps as b,guardReactiveProps as y,createVNode as g}from"vue";import{s as j,o as I}from"./VaIcon.mjs";import{p as _}from"./pick.mjs";import{u as x}from"./useForm.mjs";import{u as k}from"./useEmitProxy.mjs";import{a as h,u as N}from"./useFocus.mjs";import{a as w,b as B}from"./useStateful.mjs";import{a as S}from"./useColor.mjs";import{s as P}from"./css-utils.mjs";import{s as V}from"./VaInputWrapper.mjs";import{s as L}from"./VaButton.mjs";import"./VaConfig.mjs";import"./global-config.mjs";import"./isSymbol.mjs";import"./flatten.mjs";import"./color-config.mjs";import"colortranslator";import"./useSize.mjs";import"./index66.mjs";import"./useSyncProp.mjs";import"./consts.mjs";import"./useTextColor.mjs";import"./useRouterLink.mjs";import"./useLoading.mjs";import"./index28.mjs";import"./index39.mjs";import"./clamp.mjs";import"./toNumber.mjs";const{createEmits:$,createListeners:A}=k(["change"]),{createEmits:F,createListeners:M}=k([{listen:"click-prepend",emit:"click:decrease-button"},{listen:"click-append",emit:"click:increase-button"},{listen:"click-prepend-inner",emit:"click:decrease-icon"},{listen:"click-append-inner",emit:"click:increase-icon"}]);var W=t({name:"VaCounter",components:{VaInputWrapper:V,VaIcon:j,VaButton:L},props:{...x,...w,modelValue:{type:[String,Number],default:0},manualInput:{type:Boolean,default:!1},stateful:{type:Boolean,default:!1},min:{type:Number,default:void 0},max:{type:Number,default:void 0},step:{type:Number,default:1},label:{type:String,default:""},messages:{type:[Array,String],default:()=>[]},width:{type:[String,Number],default:"160px"},color:{type:String,default:"primary"},outline:{type:Boolean},bordered:{type:Boolean},increaseIcon:{type:String,default:"add"},decreaseIcon:{type:String,default:"remove"},buttons:{type:Boolean,default:!1},flat:{type:Boolean,default:!0},rounded:{type:Boolean,default:!1},margins:{type:[String,Number],default:"4px"},textColor:{type:String,default:void 0}},emits:["update:modelValue",...$(),...F(),...h],inheritAttrs:!1,setup(e,{emit:t,attrs:s}){const a=n(),{isFocused:r,focus:u,blur:i}=N(a,t),{valueComputed:l}=B(e,t),getRoundDownWithStep=t=>e.min&&e.step?e.min+e.step*Math.floor((t-e.min)/e.step):t,calculateCounterValue=t=>{e.min&&t<e.min?l.value=e.min:e.max&&t>e.max?l.value=getRoundDownWithStep(e.max):l.value=getRoundDownWithStep(t)},p=o((()=>!!e.min&&Number(l.value)<=e.min)),c=o((()=>!!e.max&&(e.step?Number(l.value)>e.max-e.step:Number(l.value)>=e.max))),m=o((()=>p.value||e.readonly||e.disabled)),d=o((()=>c.value||e.readonly||e.disabled)),decreaseCount=()=>{m.value||calculateCounterValue(Number(l.value)-e.step)},increaseCount=()=>{d.value||calculateCounterValue(Number(l.value)+e.step)},{colorComputed:v}=S(e),f=o((()=>({class:{"va-counter__icon--inactive":m.value},color:v.value,name:e.decreaseIcon,...!m.value&&{onClick:decreaseCount}}))),C=o((()=>({class:{"va-counter__icon--inactive":d.value},color:v.value,name:e.increaseIcon,...!d.value&&{onClick:increaseCount}}))),b=o((()=>0===("string"==typeof e.margins?parseFloat(e.margins):e.margins))),y=o((()=>({..._(e,["rounded","color","textColor"]),flat:e.flat&&!e.outline,outline:e.flat&&e.outline}))),g=o((()=>({...y.value,icon:e.decreaseIcon,disabled:m.value}))),j=o((()=>({...y.value,icon:e.increaseIcon,disabled:d.value}))),x=o((()=>({ariaLabel:e.label,...I(s,["class","style"]),..._(e,["disabled","min","max","step"]),readonly:e.readonly||!e.manualInput}))),k=o((()=>({..._(e,["color","readonly","disabled","messages","label","bordered","outline"])}))),h=o((()=>[s.class,{"va-counter--input-square":b.value}])),w=o((()=>({width:P(e.width),...s.style||{}}))),V=o((()=>P(e.margins)));return{input:a,valueComputed:l,isFocused:r,fieldListeners:M(t),inputListeners:A(t),inputAttributesComputed:x,inputWrapperPropsComputed:k,setCountInput:({target:e})=>{var t;l.value=Number(null===(t=e)||void 0===t?void 0:t.value)},setCountChange:({target:e})=>{var t;calculateCounterValue(Number(null===(t=e)||void 0===t?void 0:t.value))},decreaseCount:decreaseCount,increaseCount:increaseCount,decreaseIconProps:f,increaseIconProps:C,decreaseButtonProps:g,increaseButtonProps:j,colorComputed:v,classComputed:h,styleComputed:w,marginComputed:V}},methods:{focus(){var e;null===(e=this.input)||void 0===e||e.focus()},blur(){var e;null===(e=this.input)||void 0===e||e.blur()}}});const E={ref:"input",tabindex:"0"},R=["value"];W.render=function render(e,t,n,o,j,I){const _=s("va-button"),x=s("va-icon"),k=s("VaInputWrapper");return a(),r(k,u({class:"va-counter"},{...e.fieldListeners,...e.inputWrapperPropsComputed},{class:e.classComputed,style:e.styleComputed,focused:e.isFocused,onClick:t[8]||(t[8]=t=>e.focus()),onKeydown:[t[9]||(t[9]=i(l((t=>e.increaseCount()),["prevent"]),["up"])),t[10]||(t[10]=i(l((t=>e.decreaseCount()),["prevent"]),["down"]))]}),p({default:c((()=>[e.$slots.content?d("v-if",!0):(a(),m("input",u({key:0,class:"va-input__content__input",ref:"input",type:"number",inputmode:"decimal"},{...e.inputAttributesComputed,...e.inputListeners},{value:e.valueComputed,onInput:t[6]||(t[6]=(...t)=>e.setCountInput&&e.setCountInput(...t)),onChange:t[7]||(t[7]=(...t)=>e.setCountChange&&e.setCountChange(...t))}),null,16,R))])),_:2},[e.$props.buttons?{name:"prepend",fn:c((n=>[v("div",{class:"va-counter__prepend-wrapper",style:f({marginRight:e.marginComputed}),onMousedown:t[1]||(t[1]=l((t=>e.focus()),["prevent"]))},[C(e.$slots,"decreaseAction",b(y({...n,decreaseCount:e.decreaseCount})),(()=>[g(_,u({class:"va-counter__button-decrease"},e.decreaseButtonProps,{onClick:t[0]||(t[0]=t=>e.decreaseCount())}),null,16)]))],36)]))}:{name:"prependInner",fn:c((n=>[v("div",{onMousedown:t[2]||(t[2]=l((t=>e.focus()),["prevent"]))},[C(e.$slots,"decreaseAction",b(y({...n,decreaseCount:e.decreaseCount})),(()=>[g(x,u({class:"va-counter__icon-decrease"},e.decreaseIconProps),null,16)]))],32)]))},e.$props.buttons?{name:"append",fn:c((n=>[v("div",{class:"va-counter__append-wrapper",style:f({marginLeft:e.marginComputed}),onMousedown:t[4]||(t[4]=l((t=>e.focus()),["prevent"]))},[C(e.$slots,"increaseAction",b(y({...n,increaseCount:e.increaseCount})),(()=>[g(_,u({class:"va-counter__button-increase"},e.increaseButtonProps,{onClick:t[3]||(t[3]=t=>e.increaseCount())}),null,16)]))],36)]))}:{name:"appendInner",fn:c((n=>[v("div",{onMousedown:t[5]||(t[5]=l((t=>e.focus()),["prevent"]))},[C(e.$slots,"increaseAction",b(y({...n,increaseCount:e.increaseCount})),(()=>[g(x,u({class:"va-counter__icon-increase"},e.increaseIconProps),null,16)]))],32)]))},e.$slots.content?{name:"content",fn:c((t=>[v("div",E,[C(e.$slots,"content",b(y({...t,value:Number(e.valueComputed)})))],512)]))}:void 0]),1040,["class","style","focused"])},W.__file="src/components/va-counter/VaCounter.vue";var T=e(W);export{T as default};
//# sourceMappingURL=index55.mjs.map
