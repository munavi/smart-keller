import{w as e}from"./withConfigTransport.js";import{defineComponent as t,ref as n,computed as o,resolveComponent as s,mergeProps as r,createSlots as a,withCtx as u,openBlock as i,createBlock as l,createCommentVNode as c,createVNode as p,withModifiers as d,renderSlot as m}from"vue";import{s as v,o as f}from"./VaIcon.js";import{p as C}from"./pick.js";import{u as b}from"./useForm.js";import{u as y}from"./useEmitProxy.js";import{a as g,u as _}from"./useFocus.js";import{a as j,b as I}from"./useStateful.js";import{a as $}from"./useColor.js";import{s as x}from"./css-utils.js";import{s as k}from"./VaInputWrapper.js";import{s as w}from"./VaButton.js";import{ssrRenderComponent as h,ssrRenderAttrs as N,ssrRenderStyle as P,ssrRenderSlot as B}from"@vue/server-renderer";import"./VaConfig.js";import"./global-config.js";import"./isSymbol.js";import"./flatten.js";import"./color-config.js";import"colortranslator";import"./useSize.js";import"./index66.js";import"./useSyncProp.js";import"./consts.js";import"./useTextColor.js";import"./useRouterLink.js";import"./useLoading.js";import"./index28.js";import"./index39.js";import"./clamp.js";import"./toNumber.js";const{createEmits:A,createListeners:S}=y(["change"]),{createEmits:L,createListeners:V}=y([{listen:"click-prepend",emit:"click:decrease-button"},{listen:"click-append",emit:"click:increase-button"},{listen:"click-prepend-inner",emit:"click:decrease-icon"},{listen:"click-append-inner",emit:"click:increase-icon"}]);var M=t({name:"VaCounter",components:{VaInputWrapper:k,VaIcon:v,VaButton:w},props:{...b,...j,modelValue:{type:[String,Number],default:0},manualInput:{type:Boolean,default:!1},stateful:{type:Boolean,default:!1},min:{type:Number,default:void 0},max:{type:Number,default:void 0},step:{type:Number,default:1},label:{type:String,default:""},messages:{type:[Array,String],default:()=>[]},width:{type:[String,Number],default:"160px"},color:{type:String,default:"primary"},outline:{type:Boolean},bordered:{type:Boolean},increaseIcon:{type:String,default:"add"},decreaseIcon:{type:String,default:"remove"},buttons:{type:Boolean,default:!1},flat:{type:Boolean,default:!0},rounded:{type:Boolean,default:!1},margins:{type:[String,Number],default:"4px"},textColor:{type:String,default:void 0}},emits:["update:modelValue",...A(),...L(),...g],inheritAttrs:!1,setup(e,{emit:t,attrs:s}){const r=n(),{isFocused:a,focus:u,blur:i}=_(r,t),{valueComputed:l}=I(e,t),getRoundDownWithStep=t=>e.min&&e.step?e.min+e.step*Math.floor((t-e.min)/e.step):t,calculateCounterValue=t=>{e.min&&t<e.min?l.value=e.min:e.max&&t>e.max?l.value=getRoundDownWithStep(e.max):l.value=getRoundDownWithStep(t)},c=o((()=>!!e.min&&Number(l.value)<=e.min)),p=o((()=>!!e.max&&(e.step?Number(l.value)>e.max-e.step:Number(l.value)>=e.max))),d=o((()=>c.value||e.readonly||e.disabled)),m=o((()=>p.value||e.readonly||e.disabled)),decreaseCount=()=>{d.value||calculateCounterValue(Number(l.value)-e.step)},increaseCount=()=>{m.value||calculateCounterValue(Number(l.value)+e.step)},{colorComputed:v}=$(e),b=o((()=>({class:{"va-counter__icon--inactive":d.value},color:v.value,name:e.decreaseIcon,...!d.value&&{onClick:decreaseCount}}))),y=o((()=>({class:{"va-counter__icon--inactive":m.value},color:v.value,name:e.increaseIcon,...!m.value&&{onClick:increaseCount}}))),g=o((()=>0===("string"==typeof e.margins?parseFloat(e.margins):e.margins))),j=o((()=>({...C(e,["rounded","color","textColor"]),flat:e.flat&&!e.outline,outline:e.flat&&e.outline}))),k=o((()=>({...j.value,icon:e.decreaseIcon,disabled:d.value}))),w=o((()=>({...j.value,icon:e.increaseIcon,disabled:m.value}))),h=o((()=>({ariaLabel:e.label,...f(s,["class","style"]),...C(e,["disabled","min","max","step"]),readonly:e.readonly||!e.manualInput}))),N=o((()=>({...C(e,["color","readonly","disabled","messages","label","bordered","outline"])}))),P=o((()=>[s.class,{"va-counter--input-square":g.value}])),B=o((()=>({width:x(e.width),...s.style||{}}))),A=o((()=>x(e.margins)));return{input:r,valueComputed:l,isFocused:a,fieldListeners:V(t),inputListeners:S(t),inputAttributesComputed:h,inputWrapperPropsComputed:N,setCountInput:({target:e})=>{var t;l.value=Number(null===(t=e)||void 0===t?void 0:t.value)},setCountChange:({target:e})=>{var t;calculateCounterValue(Number(null===(t=e)||void 0===t?void 0:t.value))},decreaseCount:decreaseCount,increaseCount:increaseCount,decreaseIconProps:b,increaseIconProps:y,decreaseButtonProps:k,increaseButtonProps:w,colorComputed:v,classComputed:P,styleComputed:B,marginComputed:A}},methods:{focus(){var e;null===(e=this.input)||void 0===e||e.focus()},blur(){var e;null===(e=this.input)||void 0===e||e.blur()}}});M.ssrRender=function ssrRender(e,t,n,o,v,f,C,b){const y=s("VaInputWrapper"),g=s("va-button"),_=s("va-icon");t(h(y,r({class:"va-counter"},{...e.fieldListeners,...e.inputWrapperPropsComputed},{class:e.classComputed,style:e.styleComputed,focused:e.isFocused},o),a({default:u(((t,n,o,s)=>{if(!n)return[e.$slots.content?c("v-if",!0):(i(),l("input",r({key:0,class:"va-input__content__input",ref:"input",type:"number",inputmode:"decimal"},{...e.inputAttributesComputed,...e.inputListeners},{value:e.valueComputed,onInput:e.setCountInput,onChange:e.setCountChange}),null,16,["value","onInput","onChange"]))];e.$slots.content?n("\x3c!----\x3e"):n(`<input${N(r({class:"va-input__content__input",ref:"input",type:"number",inputmode:"decimal"},{...e.inputAttributesComputed,...e.inputListeners},{value:e.valueComputed}))}${s}>`)})),_:2},[e.$props.buttons?{name:"prepend",fn:u(((t,n,o,s)=>{if(!n)return[p("div",{class:"va-counter__prepend-wrapper",style:{marginRight:e.marginComputed},onMousedown:d((t=>e.focus()),["prevent"])},[m(e.$slots,"decreaseAction",{...t,decreaseCount:e.decreaseCount},(()=>[p(g,r({class:"va-counter__button-decrease"},e.decreaseButtonProps,{onClick:t=>e.decreaseCount()}),null,16,["onClick"])]))],44,["onMousedown"])];n(`<div class="va-counter__prepend-wrapper" style="${P({marginRight:e.marginComputed})}"${s}>`),B(e.$slots,"decreaseAction",{...t,decreaseCount:e.decreaseCount},(()=>{n(h(g,r({class:"va-counter__button-decrease"},e.decreaseButtonProps),null,o,s))}),n,o,s),n("</div>")}))}:{name:"prependInner",fn:u(((t,n,o,s)=>{if(!n)return[p("div",{onMousedown:d((t=>e.focus()),["prevent"])},[m(e.$slots,"decreaseAction",{...t,decreaseCount:e.decreaseCount},(()=>[p(_,r({class:"va-counter__icon-decrease"},e.decreaseIconProps),null,16)]))],40,["onMousedown"])];n(`<div${s}>`),B(e.$slots,"decreaseAction",{...t,decreaseCount:e.decreaseCount},(()=>{n(h(_,r({class:"va-counter__icon-decrease"},e.decreaseIconProps),null,o,s))}),n,o,s),n("</div>")}))},e.$props.buttons?{name:"append",fn:u(((t,n,o,s)=>{if(!n)return[p("div",{class:"va-counter__append-wrapper",style:{marginLeft:e.marginComputed},onMousedown:d((t=>e.focus()),["prevent"])},[m(e.$slots,"increaseAction",{...t,increaseCount:e.increaseCount},(()=>[p(g,r({class:"va-counter__button-increase"},e.increaseButtonProps,{onClick:t=>e.increaseCount()}),null,16,["onClick"])]))],44,["onMousedown"])];n(`<div class="va-counter__append-wrapper" style="${P({marginLeft:e.marginComputed})}"${s}>`),B(e.$slots,"increaseAction",{...t,increaseCount:e.increaseCount},(()=>{n(h(g,r({class:"va-counter__button-increase"},e.increaseButtonProps),null,o,s))}),n,o,s),n("</div>")}))}:{name:"appendInner",fn:u(((t,n,o,s)=>{if(!n)return[p("div",{onMousedown:d((t=>e.focus()),["prevent"])},[m(e.$slots,"increaseAction",{...t,increaseCount:e.increaseCount},(()=>[p(_,r({class:"va-counter__icon-increase"},e.increaseIconProps),null,16)]))],40,["onMousedown"])];n(`<div${s}>`),B(e.$slots,"increaseAction",{...t,increaseCount:e.increaseCount},(()=>{n(h(_,r({class:"va-counter__icon-increase"},e.increaseIconProps),null,o,s))}),n,o,s),n("</div>")}))},e.$slots.content?{name:"content",fn:u(((t,n,o,s)=>{if(!n)return[p("div",{ref:"input",tabindex:"0"},[m(e.$slots,"content",{...t,value:Number(e.valueComputed)})],512)];n(`<div tabindex="0"${s}>`),B(e.$slots,"content",{...t,value:Number(e.valueComputed)},null,n,o,s),n("</div>")}))}:void 0]),n))},M.__file="src/components/va-counter/VaCounter.vue";var F=e(M);export{F as default};
//# sourceMappingURL=index55.js.map
