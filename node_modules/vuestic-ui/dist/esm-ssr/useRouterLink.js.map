{"version":3,"file":"useRouterLink.js","sources":["../../src/composables/useRouterLink.ts"],"sourcesContent":["import { computed, PropType, getCurrentInstance, ExtractPropTypes } from 'vue'\n\nexport const useRouterLinkProps = {\n  tag: { type: String as PropType<string>, default: 'router-link' },\n  to: { type: [String, Object] as PropType<string | Record<string, unknown>>, default: null },\n  replace: { type: Boolean as PropType<boolean>, default: false },\n  append: { type: Boolean as PropType<boolean>, default: false },\n  exact: { type: Boolean as PropType<boolean>, default: false },\n  activeClass: { type: String as PropType<string>, default: '' },\n  exactActiveClass: { type: String as PropType<string>, default: '' },\n  href: { type: String as PropType<string>, default: '' },\n  target: { type: String as PropType<string>, default: '' },\n}\n\nexport const useRouterLink = (props: ExtractPropTypes<typeof useRouterLinkProps>) => {\n  const globalProperties = computed(() => getCurrentInstance()?.appContext.config.globalProperties)\n  const isNuxt = computed(() => !!globalProperties.value?.$nuxt)\n  const vueRouter = computed(() => globalProperties.value?.$router)\n  const vueRoute = computed(() => globalProperties.value?.$route)\n\n  const hasRouterLinkParams = computed(() => Boolean(\n    props.to ||\n    props.append ||\n    props.replace ||\n    props.exact ||\n    props.activeClass ||\n    props.href ||\n    props.exactActiveClass,\n  ))\n\n  const tagComputed = computed(() => {\n    if (props.tag === 'a' || (props.href && !props.to) || props.target) {\n      return 'a'\n    }\n    if (props.tag === 'nuxt-link' || (isNuxt.value && hasRouterLinkParams.value)) {\n      return 'nuxt-link'\n    }\n    if (props.tag === 'router-link' || hasRouterLinkParams.value) {\n      return 'router-link'\n    }\n\n    return props.tag\n  })\n\n  const isActiveRouterLink = computed(() => {\n    if (!vueRouter.value || !props.to) {\n      return false\n    }\n\n    const to = vueRouter.value.resolve(props.to).href\n    const currentHref = vueRouter.value.currentRoute.value.path\n\n    return to.replace('#', '') === currentHref.replace('#', '')\n  })\n\n  const hrefComputed = computed(() => {\n    // to resolve href on server for SEO optimization\n    // https://github.com/nuxt/nuxt.js/issues/8204\n    // @ts-ignore\n    return props.href || (props.to ? vueRouter.value?.resolve(props.to, vueRoute.value).href : null)\n  })\n\n  return {\n    hasRouterLinkParams,\n    tagComputed,\n    isActiveRouterLink,\n    hrefComputed,\n  }\n}\n"],"names":["useRouterLinkProps","tag","type","String","default","to","Object","replace","Boolean","append","exact","activeClass","exactActiveClass","href","target","useRouterLink","props","globalProperties","computed","getCurrentInstance","appContext","config","isNuxt","value","$nuxt","vueRouter","$router","vueRoute","$route","hasRouterLinkParams","tagComputed","isActiveRouterLink","resolve","currentHref","currentRoute","path","hrefComputed"],"mappings":"6DAEaA,EAAqB,CAChCC,IAAK,CAAEC,KAAMC,OAA4BC,QAAS,eAClDC,GAAI,CAAEH,KAAM,CAACC,OAAQG,QAAuDF,QAAS,MACrFG,QAAS,CAAEL,KAAMM,QAA8BJ,SAAS,GACxDK,OAAQ,CAAEP,KAAMM,QAA8BJ,SAAS,GACvDM,MAAO,CAAER,KAAMM,QAA8BJ,SAAS,GACtDO,YAAa,CAAET,KAAMC,OAA4BC,QAAS,IAC1DQ,iBAAkB,CAAEV,KAAMC,OAA4BC,QAAS,IAC/DS,KAAM,CAAEX,KAAMC,OAA4BC,QAAS,IACnDU,OAAQ,CAAEZ,KAAMC,OAA4BC,QAAS,KAG1CW,cAAiBC,IAC5B,MAAMC,EAAmBC,GAAS,WAAM,iBAAAC,0BAAsBC,WAAWC,OAAOJ,oBAC1EK,EAASJ,GAAS,WAAM,mBAAED,EAAiBM,4BAAOC,UAClDC,EAAYP,GAAS,WAAM,iBAAAD,EAAiBM,4BAAOG,WACnDC,EAAWT,GAAS,WAAM,iBAAAD,EAAiBM,4BAAOK,UAElDC,EAAsBX,GAAS,IAAMV,QACzCQ,EAAMX,IACNW,EAAMP,QACNO,EAAMT,SACNS,EAAMN,OACNM,EAAML,aACNK,EAAMH,MACNG,EAAMJ,oBAGFkB,EAAcZ,GAAS,IACT,MAAdF,EAAMf,KAAgBe,EAAMH,OAASG,EAAMX,IAAOW,EAAMF,OACnD,IAES,cAAdE,EAAMf,KAAwBqB,EAAOC,OAASM,EAAoBN,MAC7D,YAES,gBAAdP,EAAMf,KAAyB4B,EAAoBN,MAC9C,cAGFP,EAAMf,MAGT8B,EAAqBb,GAAS,KAClC,IAAKO,EAAUF,QAAUP,EAAMX,GAC7B,OAAO,EAGT,MAAMA,EAAKoB,EAAUF,MAAMS,QAAQhB,EAAMX,IAAIQ,KACvCoB,EAAcR,EAAUF,MAAMW,aAAaX,MAAMY,KAEvD,OAAO9B,EAAGE,QAAQ,IAAK,MAAQ0B,EAAY1B,QAAQ,IAAK,OAGpD6B,EAAelB,GAAS,WAI5B,OAAOF,EAAMH,OAASG,EAAMX,aAAKoB,EAAUF,4BAAOS,QAAQhB,EAAMX,GAAIsB,EAASJ,OAAOV,KAAO,SAG7F,MAAO,CACLgB,oBAAAA,EACAC,YAAAA,EACAC,mBAAAA,EACAK,aAAAA"}