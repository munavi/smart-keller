{"version":3,"file":"index29.js","sources":["../../src/components/va-image/VaImage.vue","../../src/components/va-image/VaImage.vue?vue&type=template&id=7ef4d00a&lang.js","../../src/components/va-image/index.ts"],"sourcesContent":["<template>\n  <div class=\"va-image\">\n    <div\n      v-if=\"loadingError\"\n      class=\"va-image__error\"\n    >\n      <slot name=\"error\" />\n    </div>\n\n    <div :style=\"paddingStyles\" />\n    <div\n      v-show=\"!loadingError && !loading\"\n      class=\"va-image__img\"\n      ref=\"img\"\n    >\n      <img\n        :style=\"imageStyles\"\n        :src=\"src\"\n        @error=\"handleError\"\n        @load=\"handleLoad\"\n      />\n    </div>\n    <div class=\"va-image__overlay\">\n      <slot />\n    </div>\n    <div\n      v-if=\"loading\"\n      class=\"va-image__loader\"\n    >\n      <slot name=\"loader\" />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed, watch, PropType, ref } from 'vue'\n\nexport default defineComponent({\n  name: 'VaImage',\n  emits: ['loaded', 'error'],\n  props: {\n    ratio: { type: Number as PropType<number>, default: 1 },\n    contain: { type: Boolean as PropType<boolean>, default: false },\n    src: { type: String as PropType<string>, required: true },\n  },\n  setup (props, { emit }) {\n    const loading = ref(true)\n    const loadingError = ref(false)\n\n    const imageStyles = computed(() => ({\n      objectFit: props.contain ? 'contain' as const : 'cover' as const,\n    }))\n\n    const paddingStyles = computed(() => ({\n      paddingBottom: `${1 / props.ratio * 100}%`,\n    }))\n\n    const handleLoad = () => {\n      loading.value = false\n      emit('loaded', props.src)\n    }\n\n    const handleError = (err: Event) => {\n      loadingError.value = true\n      loading.value = false\n      emit('error', err)\n    }\n\n    watch(() => props.src, () => {\n      loading.value = true\n      loadingError.value = false\n    })\n\n    return {\n      loading,\n      loadingError,\n      imageStyles,\n      paddingStyles,\n      handleLoad,\n      handleError,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../styles/resources\";\n@import \"variables\";\n\n.va-image {\n  overflow: var(--va-image-overflow);\n  position: var(--va-image-position);\n  font-family: var(--va-font-family);\n\n  img {\n    height: 100%;\n    width: 100%;\n  }\n\n  &__img,\n  &__loader,\n  &__error,\n  &__overlay {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n  }\n\n  &__loader,\n  &__error,\n  &__overlay {\n    @include flex-center();\n  }\n}\n</style>\n","<template>\n  <div class=\"va-image\">\n    <div\n      v-if=\"loadingError\"\n      class=\"va-image__error\"\n    >\n      <slot name=\"error\" />\n    </div>\n\n    <div :style=\"paddingStyles\" />\n    <div\n      v-show=\"!loadingError && !loading\"\n      class=\"va-image__img\"\n      ref=\"img\"\n    >\n      <img\n        :style=\"imageStyles\"\n        :src=\"src\"\n        @error=\"handleError\"\n        @load=\"handleLoad\"\n      />\n    </div>\n    <div class=\"va-image__overlay\">\n      <slot />\n    </div>\n    <div\n      v-if=\"loading\"\n      class=\"va-image__loader\"\n    >\n      <slot name=\"loader\" />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed, watch, PropType, ref } from 'vue'\n\nexport default defineComponent({\n  name: 'VaImage',\n  emits: ['loaded', 'error'],\n  props: {\n    ratio: { type: Number as PropType<number>, default: 1 },\n    contain: { type: Boolean as PropType<boolean>, default: false },\n    src: { type: String as PropType<string>, required: true },\n  },\n  setup (props, { emit }) {\n    const loading = ref(true)\n    const loadingError = ref(false)\n\n    const imageStyles = computed(() => ({\n      objectFit: props.contain ? 'contain' as const : 'cover' as const,\n    }))\n\n    const paddingStyles = computed(() => ({\n      paddingBottom: `${1 / props.ratio * 100}%`,\n    }))\n\n    const handleLoad = () => {\n      loading.value = false\n      emit('loaded', props.src)\n    }\n\n    const handleError = (err: Event) => {\n      loadingError.value = true\n      loading.value = false\n      emit('error', err)\n    }\n\n    watch(() => props.src, () => {\n      loading.value = true\n      loadingError.value = false\n    })\n\n    return {\n      loading,\n      loadingError,\n      imageStyles,\n      paddingStyles,\n      handleLoad,\n      handleError,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../styles/resources\";\n@import \"variables\";\n\n.va-image {\n  overflow: var(--va-image-overflow);\n  position: var(--va-image-position);\n  font-family: var(--va-font-family);\n\n  img {\n    height: 100%;\n    width: 100%;\n  }\n\n  &__img,\n  &__loader,\n  &__error,\n  &__overlay {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n  }\n\n  &__loader,\n  &__error,\n  &__overlay {\n    @include flex-center();\n  }\n}\n</style>\n","import withConfigTransport from '../../services/config-transport/withConfigTransport'\nimport VaImage from './VaImage.vue'\n\nexport default withConfigTransport(VaImage)\n"],"names":["defineComponent","name","emits","props","ratio","type","Number","default","contain","Boolean","src","String","required","setup","emit","loading","ref","loadingError","imageStyles","computed","objectFit","paddingStyles","paddingBottom","watch","value","handleLoad","handleError","err","_mergeProps","class","_ctx","withConfigTransport","VaImage"],"mappings":"sSAqCA,MAAeA,EAAgB,CAC7BC,KAAM,UACNC,MAAO,CAAC,SAAU,SAClBC,MAAO,CACLC,MAAO,CAAEC,KAAMC,OAA4BC,QAAS,GACpDC,QAAS,CAAEH,KAAMI,QAA8BF,SAAS,GACxDG,IAAK,CAAEL,KAAMM,OAA4BC,UAAU,IAErDC,MAAOV,GAAOW,KAAEA,IACd,MAAMC,EAAUC,GAAI,GACdC,EAAeD,GAAI,GAEnBE,EAAcC,GAAS,MAC3BC,UAAWjB,EAAMK,QAAU,UAAqB,YAG5Ca,EAAgBF,GAAS,MAC7BG,cAAkB,EAAInB,EAAMC,MAAQ,IAArB,QAmBjB,OALAmB,GAAM,IAAMpB,EAAMO,MAAK,KACrBK,EAAQS,OAAQ,EAChBP,EAAaO,OAAQ,KAGhB,CACLT,QAAAA,EACAE,aAAAA,EACAC,YAAAA,EACAG,cAAAA,EACAI,WArBiB,KACjBV,EAAQS,OAAQ,EAChBV,EAAK,SAAUX,EAAMO,MAoBrBgB,YAjBmBC,IACnBV,EAAaO,OAAQ,EACrBT,EAAQS,OAAQ,EAChBV,EAAK,QAASa,mEChElBC,GAAKC,MAAM,oBAEDC,sIAMKA,yCAEFA,gBAAiBA,yEAKhBA,oBACP,MAAKA,8FASFA,4KCvBZ,MAAeC,EAAoBC"}