import{w as e}from"./withConfigTransport.js";import{defineComponent as a,ref as l,computed as r,onMounted as t,onBeforeUnmount as o,watch as i,resolveComponent as s,mergeProps as n}from"vue";import{u as v,h as u}from"./color-config.js";import{w as d}from"./utils.js";import c from"./index28.js";import{ssrRenderAttrs as m,ssrRenderSlot as p,ssrRenderStyle as y,ssrInterpolate as f,ssrRenderComponent as b,ssrRenderList as A,ssrRenderClass as h,ssrRenderAttr as x}from"@vue/server-renderer";import"./VaConfig.js";import"./global-config.js";import"colortranslator";import"./VaIcon.js";import"./isSymbol.js";import"./flatten.js";import"./useSize.js";const validateSlider=(e,a,l,r)=>{r<l&&d("The maximum value can not be less than the minimum value."),l>r&&d("The minimum value can not be greater than the maximum value."),(r-l)%a!=0&&d("Step is illegal. Slider is nondivisible.");const inRange=e=>{e<l?d(`The value of the slider is ${e}, the minimum value is ${l}, the value of this slider can not be less than the minimum value`):e>r&&d(`The value of the slider is ${e}, the maximum value is ${r}, the value of this slider can not be greater than the maximum value`)};return Array.isArray(e)?e.map((e=>inRange(e))):inRange(e),!0};var g=a({name:"VaSlider",components:{VaIcon:c},emits:["drag-start","drag-end","change","update:modelValue"],props:{range:{type:Boolean,default:!1},modelValue:{type:[Number,Array],default:()=>[]},trackLabel:{type:[Function,String]},color:{type:String,default:"primary"},trackColor:{type:String,default:""},labelColor:{type:String,default:""},trackLabelVisible:{type:Boolean,default:!1},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},label:{type:String,default:""},invertLabel:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},pins:{type:Boolean,default:!1},iconPrepend:{type:String,default:""},iconAppend:{type:String,default:""},vertical:{type:Boolean,default:!1},showTrack:{type:Boolean,default:!0}},setup(e,{emit:a}){const{getColor:s}=v(),n=l(),d=l(),c=l(),m=l(),p=l(!1),y=l(!1),f=l(0),b=l(0),A=l(e.modelValue),h=l(0),x=l(!1),g=r((()=>e.vertical?[1,0]:[0,1])),_=r((()=>e.vertical?"bottom":"left")),k=r((()=>e.vertical?"height":"width")),$=r((()=>Array.isArray(D.value)&&D.value[1]-e.step<D.value[0])),C=r((()=>Array.isArray(D.value)&&D.value[0]+e.step>D.value[1])),w=r((()=>({"va-slider--active":p.value,"va-slider--disabled":e.disabled,"va-slider--readonly":e.readonly,"va-slider--horizontal":!e.vertical,"va-slider--vertical":e.vertical}))),L=r((()=>e.range?[{"va-slider__handler--inactive":!p.value},{"va-slider__handler--inactive":!p.value}]:{"va-slider__handler--on-focus":!e.range&&(y.value||p),"va-slider__handler--inactive":!p.value})),S=r((()=>({color:e.labelColor?s(e.labelColor):s(e.color)}))),V=r((()=>({backgroundColor:e.trackColor?s(e.trackColor):u(s(e.color))}))),E=r((()=>{const a=limitValue(e.modelValue);if(Array.isArray(a)){const l=(a[0]-e.min)/(e.max-e.min)*100,r=(a[1]-e.min)/(e.max-e.min)*100;return{[_.value]:`${l}%`,[k.value]:r-l+"%",backgroundColor:s(e.color),visibility:e.showTrack?"visible":"hidden"}}{const l=(a-e.min)/(e.max-e.min)*100;return{[k.value]:`${l}%`,backgroundColor:s(e.color),visibility:e.showTrack?"visible":"hidden"}}})),T=r((()=>{const a=limitValue(e.modelValue);if(Array.isArray(a)){const l=(a[0]-e.min)/(e.max-e.min)*100,r=(a[1]-e.min)/(e.max-e.min)*100;return[{[_.value]:`${l}%`,backgroundColor:isActiveDot(0)?s(e.color):"#ffffff",borderColor:s(e.color)},{[_.value]:`${r}%`,backgroundColor:isActiveDot(1)?s(e.color):"#ffffff",borderColor:s(e.color)}]}{const l=(a-e.min)/(e.max-e.min)*100;return{[_.value]:`${l}%`,backgroundColor:isActiveDot(0)?s(e.color):"#ffffff",borderColor:s(e.color)}}})),D=r({get:()=>e.modelValue,set:l=>{e.range||(l=limitValue(l)),y.value||a("change",l),a("update:modelValue",l)}}),j=r((()=>{const a=(e.max-e.min)/e.step;return b.value/a})),B=r((()=>{const a=`${e.step}`.split(".")[1];return a?Math.pow(10,a.length):1})),P=r((()=>(e.max-e.min)/e.step-1)),R=r((()=>Array.isArray(e.modelValue)?[(e.modelValue[0]-e.min)/e.step*j.value,(e.modelValue[1]-e.min)/e.step*j.value]:(e.modelValue-e.min)/e.step*j.value)),N=r((()=>[0,b.value])),z=r((()=>[e.min,e.max])),isActiveDot=a=>!(!p.value&&!y.value||e.disabled||e.readonly)&&(e.range?h.value===a:0===h.value),moveStart=(l,r=h.value)=>{var t,o;if(l.preventDefault(),!r)if(e.range){if(Array.isArray(R.value)){r=getPos(l instanceof TouchEvent?l.touches[0]:l)>(R.value[1]-R.value[0])/2+R.value[0]?1:0}}else r=0;Array.isArray(e.modelValue)&&(h.value=r),Array.isArray(e.modelValue)?null===(t=(0===r?d:c).value)||void 0===t||t.focus():null===(o=n.value)||void 0===o||o.focus(),y.value=!0,a("drag-start")},moving=a=>{x.value&&y.value&&!e.disabled&&!e.readonly&&setValueOnPos(getPos("touches"in a?a.touches[0]:a))},moveEnd=()=>{if(!e.disabled&&!e.readonly){if(!y.value)return!1;a("drag-end"),a("change",e.modelValue),y.value=!1,x.value=!1}},moveWithKeys=a=>{var l,r;if(![d.value,c.value,n.value].includes(document.activeElement))return;if(e.disabled||e.readonly)return;const moveDot=(a,l,r)=>{if(a&&Array.isArray(D.value)){if(!e.pins)return D.value.splice(r,1,D.value[r]+(l?e.step:-e.step));const a=(e.max-e.min)/(P.value+1);let t=(D.value[r]/a|0)*a;D.value[r]!==t?(t+=l?a:0,D.value.splice(r,1,t)):D.value.splice(r,1,D.value[r]+(l?e.step:-e.step))}else{if(!e.pins&&!Array.isArray(D.value))return void(D.value+=l?e.step:-e.step);const a=(e.max-e.min)/(P.value+1);let r=(Array.isArray(D.value)?0:D.value/a|0)*a;D.value!==r?(r+=l?a:0,D.value=r):D.value+=l?e.step:-e.step}};["ArrowLeft","ArrowUp","ArrowRight","ArrowDown"].includes(a.key)&&a.preventDefault();const isActive=e=>e===document.activeElement;if(e.range&&Array.isArray(D.value)){const isVerticalDot0More=a=>e.vertical&&isActive(d.value)&&"ArrowUp"===a.key,isVerticalDot0Less=a=>e.vertical&&isActive(d.value)&&"ArrowDown"===a.key,isVerticalDot1More=a=>e.vertical&&isActive(c.value)&&"ArrowUp"===a.key,isVerticalDot1Less=a=>e.vertical&&isActive(c.value)&&"ArrowDown"===a.key,isHorizontalDot0Less=a=>!e.vertical&&isActive(d.value)&&"ArrowLeft"===a.key,isHorizontalDot0More=a=>!e.vertical&&isActive(d.value)&&"ArrowRight"===a.key,isHorizontalDot1Less=a=>!e.vertical&&isActive(c.value)&&"ArrowLeft"===a.key,isHorizontalDot1More=a=>!e.vertical&&isActive(c.value)&&"ArrowRight"===a.key;switch(!0){case(isVerticalDot1Less(a)||isHorizontalDot1Less(a))&&$.value&&D.value[0]!==e.min:null===(l=d.value)||void 0===l||l.focus(),moveDot(!0,0,0);break;case(isVerticalDot0More(a)||isHorizontalDot0More(a))&&C.value&&D.value[1]!==e.max:null===(r=c.value)||void 0===r||r.focus(),moveDot(!0,1,1);break;case(isVerticalDot0Less(a)||isHorizontalDot0Less(a))&&D.value[0]!==e.min:moveDot(!0,0,0);break;case(isVerticalDot1More(a)||isHorizontalDot1More(a))&&D.value[1]!==e.max:moveDot(!0,1,1);break;case(isVerticalDot1Less(a)||isHorizontalDot1Less(a))&&D.value[1]!==e.min:moveDot(!0,0,1);break;case(isVerticalDot0More(a)||isHorizontalDot0More(a))&&D.value[0]!==e.max:moveDot(!0,1,0)}}else e.vertical?("ArrowDown"===a.key&&moveDot(!1,0,0),"ArrowUp"===a.key&&moveDot(!1,1,0)):("ArrowLeft"===a.key&&moveDot(!1,0,0),"ArrowRight"===a.key&&moveDot(!1,1,0))},checkActivePin=a=>Array.isArray(D.value)?a*e.step>D.value[0]&&a*e.step<D.value[1]:a*e.step<D.value,F=r((()=>e.step/(e.max-e.min)*100)),getPos=a=>(getStaticData(),e.vertical?f.value-a.clientY:a.clientX-f.value),getStaticData=()=>{m.value&&(b.value=m.value[e.vertical?"offsetHeight":"offsetWidth"],f.value=m.value.getBoundingClientRect()[_.value])},getValueByIndex=a=>(e.step*B.value*a+e.min*B.value)/B.value,setCurrentValue=a=>{const l=h.value;if(Array.isArray(D.value)&&Array.isArray(A.value)&&Array.isArray(e.modelValue))isDiff(A.value[l],a)&&(A.value.splice(l,1,a),0===l?(D.value=[A.value.splice(l,1,a)[0],e.modelValue[1]],A.value=[...D.value]):(D.value=[e.modelValue[0],A.value.splice(l,1,a)[0]],A.value=[...D.value]));else{if(a<e.min||a>e.max)return!1;isDiff(A.value,a)&&(A.value=a,D.value=a)}},setValueOnPos=a=>{const l=N.value,r=z.value,t=Array.isArray(e.modelValue)?h.value?c.value:d.value:n.value;if(null==t||t.focus(),a>=l[0]&&a<=l[1])if(h.value){Array.isArray(R.value)&&Array.isArray(D.value)&&a<=R.value[0]&&(D.value[1]=D.value[0],h.value=0);const e=getValueByIndex(Math.round(a/j.value));setCurrentValue(e)}else{Array.isArray(R.value)&&Array.isArray(D.value)&&a>=R.value[1]&&(D.value[0]=D.value[1],h.value=1);const e=getValueByIndex(Math.round(a/j.value));setCurrentValue(e)}else a<l[0]?setCurrentValue(r[0]):setCurrentValue(r[1])},limitValue=a=>{const inRange=a=>a<e.min?e.min:a>e.max?e.max:a;if(Array.isArray(a)){if(a[0]>=a[1]&&0===h.value){const e=inRange(a[1]);return[e,e]}if(a[0]>=a[1]&&1===h.value){const e=inRange(a[0]);return[e,e]}return a.map((e=>inRange(e)))}return inRange(a)},isDiff=(e,a)=>JSON.stringify(e)!==JSON.stringify(a);return t((()=>{validateSlider(e.modelValue,e.step,e.min,e.max)&&(getStaticData(),document.addEventListener("mousemove",moving),document.addEventListener("touchmove",moving),document.addEventListener("mouseup",moveEnd),document.addEventListener("mouseleave",moveEnd),document.addEventListener("touchcancel",moveEnd),document.addEventListener("touchend",moveEnd),document.addEventListener("keydown",moveWithKeys))})),o((()=>{document.removeEventListener("mousemove",moving),document.removeEventListener("touchmove",moving),document.removeEventListener("mouseup",moveEnd),document.removeEventListener("mouseleave",moveEnd),document.removeEventListener("touchcancel",moveEnd),document.removeEventListener("touchend",moveEnd),document.removeEventListener("keydown",moveWithKeys)})),i([D,()=>e.step,()=>e.min,()=>e.max],(([e,a,l,r])=>{validateSlider(e,a,l,r)})),i(x,(e=>{document.documentElement.style.cursor=e?"grabbing":""})),{getColor:s,dot:n,dot0:d,dot1:c,orders:g,sliderContainer:m,val:D,sliderClass:w,dotClass:L,labelStyles:S,processedStyles:E,getPinStyles:a=>({backgroundColor:checkActivePin(a)?s(e.color):u(s(e.color)),[_.value]:a*F.value+"%",transition:x.value?"none":"var(--va-slider-pin-transition)"}),dottedStyles:T,clickOnContainer:a=>{if(e.disabled||e.readonly)return;const l=getPos("touches"in a?a.touches[0]:a);Array.isArray(R.value)&&(h.value=l>(R.value[1]-R.value[0])/2+R.value[0]?1:0),x.value=!0,setValueOnPos(l),moveStart(a,h.value)},moveStart:moveStart,hasMouseDown:x,trackStyles:V,pinsCol:P,checkActivePin:checkActivePin,isFocused:p,isActiveDot:isActiveDot,getTrackLabel:(a,l)=>e.trackLabel?"function"==typeof e.trackLabel?e.trackLabel(a,l):void 0:a,currentSliderDotIndex:h,isRange:Array.isArray(e.modelValue)}}});g.ssrRender=function ssrRender(e,a,l,r,t,o,i,v){const u=s("va-icon");a(`<div${m(n({class:["va-slider",e.sliderClass]},r))}>`),(e.vertical?e.$slots.append:e.$slots.prepend)?(a('<div class="va-slider__input-wrapper">'),p(e.$slots,e.vertical?"append":"prepend",{},null,a,l),a("</div>")):a("\x3c!----\x3e"),!e.$slots.label&&!e.label||e.invertLabel?a("\x3c!----\x3e"):(a(`<span style="${y(e.labelStyles)}" class="va-input__label">`),p(e.$slots,"label",{},(()=>{a(`${f(e.label)}`)}),a,l),a("</span>")),(e.vertical?e.iconAppend:e.iconPrepend)?(a('<span class="va-input__label">'),a(b(u,{name:e.vertical?e.iconAppend:e.iconPrepend,color:e.getColor(e.$props.color),size:16},null,l)),a("</span>")):a("\x3c!----\x3e"),a(`<div class="va-slider__container"><div class="va-slider__track" style="${y(e.trackStyles)}"></div>`),e.pins?(a("\x3c!--[--\x3e"),A(e.pinsCol,((l,r)=>{a(`<div class="${h([{"va-slider__mark--active":e.checkActivePin(l)},"va-slider__mark"])}" style="${y(e.getPinStyles(l))}"></div>`)})),a("\x3c!--]--\x3e")):a("\x3c!----\x3e"),e.isRange?(a(`\x3c!--[--\x3e<div class="${h([{"va-slider__track--active":e.isFocused},"va-slider__track va-slider__track--selected"])}" style="${y(e.processedStyles)}"></div>\x3c!--[--\x3e`),A(e.orders,(r=>{a(`<div class="${h([e.dotClass[r],"va-slider__handler"])}" style="${y(e.dottedStyles[r])}"${x("tabindex",e.disabled||e.readonly?void 0:0)}>`),e.isActiveDot(r)?a(`<div style="${y({backgroundColor:e.getColor(e.$props.color)})}" class="va-slider__handler__dot--focus"></div>`):a("\x3c!----\x3e"),e.trackLabelVisible?(a(`<div style="${y(e.labelStyles)}" class="va-slider__handler__dot--value">`),p(e.$slots,"trackLabel",{value:e.val[r],order:r},(()=>{a(`${f(e.getTrackLabel(e.val[r],r))}`)}),a,l),a("</div>")):a("\x3c!----\x3e"),a("</div>")})),a("\x3c!--]--\x3e\x3c!--]--\x3e")):(a(`\x3c!--[--\x3e<div class="${h([{"va-slider__track--active":e.isFocused},"va-slider__track va-slider__track--selected"])}" style="${y(e.processedStyles)}"></div><div class="${h([e.dotClass,"va-slider__handler"])}" style="${y(e.dottedStyles)}"${x("tabindex",e.$props.disabled||e.$props.readonly?void 0:0)}>`),e.isActiveDot(0)?a(`<div class="va-slider__handler__dot--focus" style="${y({backgroundColor:e.getColor(e.$props.color)})}"></div>`):a("\x3c!----\x3e"),e.trackLabelVisible?(a(`<div style="${y(e.labelStyles)}" class="va-slider__handler__dot--value">`),p(e.$slots,"trackLabel",{value:e.val},(()=>{a(`${f(e.getTrackLabel(e.val))}`)}),a,l),a("</div>")):a("\x3c!----\x3e"),a("</div>\x3c!--]--\x3e")),a("</div>"),(e.vertical?e.iconPrepend:e.iconAppend)?(a('<span class="va-input__label--inverse">'),a(b(u,{name:e.vertical?e.iconPrepend:e.iconAppend,color:e.getColor(e.$props.color),size:16},null,l)),a("</span>")):a("\x3c!----\x3e"),(e.$slots.label||e.label)&&e.invertLabel?(a(`<span style="${y(e.labelStyles)}" class="va-input__label va-input__label--inverse">`),p(e.$slots,"label",{},(()=>{a(`${f(e.label)}`)}),a,l),a("</span>")):a("\x3c!----\x3e"),(e.vertical?e.$slots.prepend:e.$slots.append)?(a('<div class="va-slider__input-wrapper">'),p(e.$slots,e.vertical?"prepend":"append",{},null,a,l),a("</div>")):a("\x3c!----\x3e"),a("</div>")},g.__file="src/components/va-slider/VaSlider.vue";var _=e(g);export{_ as default};
//# sourceMappingURL=index44.js.map
