import{w as e}from"./withConfigTransport.js";import{ref as t,computed as o,getCurrentInstance as a,defineComponent as r,watch as l,resolveComponent as n,mergeProps as u,createSlots as s,withCtx as i,createVNode as m}from"vue";import{c as p}from"./clamp.js";import{u as d}from"./useHover.js";import{a as c,b as v}from"./useStateful.js";import{u as f}from"./color-config.js";import{u as g,a as b}from"./useForm.js";import{f as V,e as y}from"./child-props.js";import{u as C}from"./useSyncProp.js";import I from"./index28.js";import{ssrRenderAttrs as L,ssrRenderSlot as x,ssrRenderComponent as h,ssrInterpolate as R,ssrRenderList as N,ssrRenderStyle as $}from"@vue/server-renderer";import{u as F,a as _}from"./useSize.js";import"./VaConfig.js";import"./global-config.js";import"./toNumber.js";import"./isSymbol.js";import"colortranslator";import"./VaIcon.js";import"./flatten.js";var j;!function(e){e[e.EMPTY=0]="EMPTY",e[e.HALF=.5]="HALF",e[e.FULL=1]="FULL"}(j||(j={}));const M={...c,modelValue:{type:Number,default:0},clearable:{type:Boolean,default:!1},hover:{type:Boolean,default:!1}},useRating=e=>{const{emit:r}=(()=>{const e=a();if(!e)throw new Error("useRating hooks must be used on top of setup function");return{props:e.props,emit:e.emit}})(),{isHovered:l,onMouseEnter:n,onMouseLeave:u}=d(),{valueComputed:s}=v(e,r),i=t(0),m=o((()=>e.hover&&l.value?i.value:s.value));return{visibleValue:m,modelValue:s,hoveredValue:i,isHovered:l,onMouseEnter:n,onMouseLeave:u,onItemValueUpdate:(t,o)=>{const a=t+o;e.clearable&&s.value===a?s.value=0:s.value=a},onItemHoveredValueUpdate:(t,o)=>{e.hover&&(i.value=t+o)},getItemValue:e=>{const t=m.value-e;return p(t,j.EMPTY,j.FULL)}}},S={unselectedColor:{type:String},color:{type:String,default:"primary"},modelValue:{type:Number}},useVaRatingColors=e=>{const{getColor:t,getFocusColor:a,getTextColor:r}=f(),l=o((()=>t(e.color))),n=o((()=>e.unselectedColor?t(e.unselectedColor):a(t(e.color)))),u=o((()=>e.modelValue===j.HALF?`linear-gradient(90deg, ${l.value} 50%, ${n.value} 50%`:e.modelValue===j.EMPTY?n.value:l.value)),s=o((()=>e.modelValue===j.FULL?r(l.value):r(n.value)));return{computedColor:l,backgroundComputed:u,textColorComputed:s}};var E=r({name:"VaRatingItem",components:{VaIcon:I},props:{modelValue:{type:Number,default:0},icon:{type:String,default:"star"},halfIcon:{type:String,default:"star_half"},emptyIcon:{type:String,default:"star_outline"},halves:{type:Boolean,default:!1},hover:{type:Boolean,default:!1},tabindex:{type:Number,default:1},size:{type:[String,Number],default:"medium"},emptyIconColor:{type:String},color:{type:String,default:"primary"}},emits:["update:modelValue","click","hover"],setup(e,{emit:a}){const r=t(),[n]=C("modelValue",e,a,j.EMPTY),u=t(null),s=o((()=>e.hover&&u.value||n.value));return l(u,(()=>a("hover",u.value||j.EMPTY))),{...f(),rootEl:r,onEnter:()=>{n.value=1},onClick:()=>{n.value=u.value||j.FULL,a("click",u.value||j.FULL)},onMouseMove:t=>{if(!r.value)return;const{offsetX:o}=t,a=r.value.clientWidth;e.halves?u.value=o/a<=j.HALF?j.HALF:j.FULL:u.value=j.FULL},onMouseLeave:()=>{u.value=null},visibleValue:s,computedIconName:o((()=>e.halves&&s.value===j.HALF?e.halfIcon:s.value===j.EMPTY?e.emptyIcon:e.icon))}}});E.ssrRender=function ssrRender$2(e,t,o,a,r,l,s,i){const m=n("va-icon");t(`<div${L(u({ref:"rootEl",class:"va-rating-item",tabindex:e.$props.tabindex},a))}>`),x(e.$slots,"default",{props:{value:e.visibleValue,onClick:e.onClick}},(()=>{t(h(m,{class:"va-rating-item__wrapper",tabindex:"-1",tag:"button",name:e.computedIconName,size:e.$props.size,color:e.getColor(e.$props.color)},null,o))}),t,o),t("</div>")},E.__file="src/components/va-rating/components/VaRatingItem/VaRatingItem.vue";var P=r({name:"VaRatingItemNumberButton",props:{...S,...F,itemNumber:{type:Number,required:!0},modelValue:{type:Number,required:!0}},setup:e=>({...useVaRatingColors(e),..._(e,"VaRating")})});P.ssrRender=function ssrRender$1(e,t,o,a,r,l,n,s){t(`<button${L(u({class:"va-rating__number-item",tabindex:"-1",style:{background:e.backgroundComputed,color:e.textColorComputed,width:e.sizeComputed,height:e.sizeComputed,fontSize:e.fontSizeComputed,borderRadius:.125*parseInt(e.fontSizeComputed)+"rem"}},a))}>${R(e.itemNumber)}</button>`)},P.__file="src/components/va-rating/components/VaRatingItemNumberButton.vue";const k=y(E,["unselectedColor"]),B=y(P,["modelValue","itemNumber"]);var U=r({name:"VaRating",props:{...M,...S,...g,...k,...B,numbers:{type:Boolean,default:!1},halves:{type:Boolean,default:!1},max:{type:Number,default:5},texts:{type:Array,default:()=>[]}},emits:["update:modelValue"],components:{VaRatingItem:E,VaRatingItemNumberButton:P},setup(e){const{createComputedClass:t}=b(e),a=useRating(e),r=o((()=>!e.disabled&&!e.readonly));return{...useVaRatingColors(e),...a,rootClass:t("va-rating"),VaRatingItemProps:V(e,k),VaRatingItemNumberButtonProps:V(e,B),isInteractionsEnabled:r,tabindex:o((()=>r.value?0:void 0)),onArrowKeyPress:t=>{const o=e.halves?j.HALF:j.FULL;a.onItemValueUpdate(a.visibleValue.value,o*t)}}}});U.ssrRender=function ssrRender(e,t,o,a,r,l,p,d){const c=n("va-rating-item"),v=n("VaRatingItemNumberButton");t(`<div${L(u({class:["va-rating",e.rootClass]},a))}><div class="va-rating__item-wrapper">\x3c!--[--\x3e`),N(e.$props.max,(a=>{t(h(c,u(e.VaRatingItemProps,{"model-value":e.getItemValue(a-1),key:a,"empty-icon-color":e.$props.unselectedColor,tabindex:e.tabindex}),s({_:2},[e.$props.numbers?{name:"default",fn:i((({props:t},o,r,l)=>{if(!o)return[m(v,u(e.VaRatingItemNumberButtonProps,{"model-value":t.value,"item-number":a,onClick:t.onClick}),null,16,["model-value","item-number","onClick"])];o(h(v,u(e.VaRatingItemNumberButtonProps,{"model-value":t.value,"item-number":a}),null,r,l))}))}:void 0]),o))})),t("\x3c!--]--\x3e</div>"),e.$props.texts&&e.$props.texts.length===e.$props.max?t(`<span class="va-rating__text-wrapper" style="${$({color:e.computedColor})}">${R(e.$props.texts[Math.round(e.visibleValue)-1])}</span>`):t("\x3c!----\x3e"),t("</div>")},U.__file="src/components/va-rating/VaRating.vue";var H=e(E),w=e(U);export{H as VaRatingItem,w as default};
//# sourceMappingURL=index41.js.map
