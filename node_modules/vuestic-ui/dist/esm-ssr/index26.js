import{w as e}from"./withConfigTransport.js";import{defineComponent as l,resolveComponent as a,mergeProps as o,withCtx as i,createTextVNode as t,ref as n,openBlock as r,createBlock as d,createVNode as s,toDisplayString as u,computed as p,onMounted as m,watch as f,shallowRef as v}from"vue";import{i as c,u as g,d as y}from"./color-config.js";import _ from"./index9.js";import F from"./index33.js";import V from"./index14.js";import x from"./index28.js";import{ssrRenderAttrs as U,ssrRenderComponent as b,ssrInterpolate as $,ssrRenderAttr as j,ssrRenderStyle as B,ssrRenderList as S,ssrRenderSlot as I,ssrIncludeBooleanAttr as D}from"@vue/server-renderer";import"./VaConfig.js";import"./global-config.js";import"colortranslator";import"./VaButton.js";import"./useTextColor.js";import"./useColor.js";import"./useRouterLink.js";import"./useSize.js";import"./useLoading.js";import"./index39.js";import"./clamp.js";import"./toNumber.js";import"./isSymbol.js";import"./VaIcon.js";import"./flatten.js";import"./useStateful.js";import"./useAlign.js";var L=l({name:"VaFileUploadUndo",components:{VaButton:_},emits:["recover"]});L.ssrRender=function ssrRender$5(e,l,n,r,d,s,u,p){const m=a("va-button");l(`<div${U(o({class:"va-file-upload-undo"},r))}><span>File was successfully deleted</span>`),l(b(m,{outline:"",size:"small",class:"va-file-upload-undo__button"},{default:i(((e,l,a,o)=>{if(!l)return[t(" Undo ")];l(" Undo ")})),_:1},n)),l("</div>")},L.__file="src/components/va-file-upload/VaFileUploadUndo/VaFileUploadUndo.vue";var h=e(L),R=l({name:"VaFileUploadListItem",components:{VaIcon:x,VaCard:V,VaFileUploadUndo:h},emits:["remove"],props:{file:{type:Object,default:null},color:{type:String,default:"success"},undo:{type:Boolean,default:!1},undoDuration:{type:Number,default:3e3}},setup(e,{emit:l}){const a=n(!1);return{removed:a,removeFile:()=>{e.undo?(a.value=!0,setTimeout((()=>{a.value&&(l("remove"),a.value=!1)}),e.undoDuration)):(l("remove"),a.value=!1)},recoverFile:()=>{a.value=!1}}}});R.ssrRender=function ssrRender$4(e,l,t,n,p,m,f,v){const c=a("va-card"),g=a("va-file-upload-undo"),y=a("va-icon");l(b(c,o({class:["va-file-upload-list-item",{"file-upload-list-item--undo":e.removed}],stripe:e.removed&&e.undo,stripeColor:e.color,"no-margin":"","no-padding":""},n),{default:i(((l,a,o,i)=>{if(!a)return[e.removed&&e.undo?(r(),d(g,{key:0,onRecover:e.recoverFile},null,8,["onRecover"])):(r(),d("div",{key:1,class:"va-file-upload-list-item__content"},[s("div",{class:"va-file-upload-list-item__name"},u(e.file&&e.file.name),1),s("div",{class:"va-file-upload-list-item__size"},u(e.file&&e.file.size),1),s(y,{color:"danger",name:"clear",onClick:l=>e.removeFile(),class:"va-file-upload-list-item__delete"},null,8,["onClick"])]))];e.removed&&e.undo?a(b(g,null,null,o,i)):(a(`<div class="va-file-upload-list-item__content"${i}><div class="va-file-upload-list-item__name"${i}>${$(e.file&&e.file.name)}</div><div class="va-file-upload-list-item__size"${i}>${$(e.file&&e.file.size)}</div>`),a(b(y,{color:"danger",name:"clear",class:"va-file-upload-list-item__delete"},null,o,i)),a("</div>"))})),_:1},t))},R.__file="src/components/va-file-upload/VaFileUploadListItem/VaFileUploadListItem.vue";var z=e(R),C=l({name:"VaFileUploadGalleryItem",components:{VaFileUploadUndo:h,VaButton:_},emits:["remove"],props:{file:{type:Object,default:null},color:{type:String,default:"success"},undo:{type:Boolean,default:!1},undoDuration:{type:Number,default:3e3}},setup(e,{emit:l}){const a=n(""),o=n(!1),i=n(!1),t=p((()=>({backgroundColor:c(e.color,.7)}))),convertToImg=()=>{if(e.file.name&&e.file.image)if(e.file.image.url)a.value=e.file.image.url;else if(e.file.image instanceof File){const l=new FileReader;l.readAsDataURL(e.file.image),l.onload=e=>{var l,o;(null===(l=e.target)||void 0===l?void 0:l.result).includes("image")&&(a.value=null===(o=e.target)||void 0===o?void 0:o.result)}}};return m(convertToImg),f((()=>e.file),convertToImg),{previewImage:a,removed:o,isFocused:i,recoverImage:()=>{o.value=!1},overlayStyles:t,removeImage:()=>{e.undo?(o.value=!0,setTimeout((()=>{o.value&&(l("remove"),o.value=!1)}),e.undoDuration)):(l("remove"),o.value=!1)}}}});C.ssrRender=function ssrRender$3(e,l,i,t,n,r,d,s){const u=a("va-file-upload-undo"),p=a("va-button");e.removed&&e.undo?(l(`<div${U(o({class:["va-file-upload-gallery-item",{"va-file-upload-gallery-item--undo":e.removed}]},t))}>`),l(b(u,{class:"va-file-upload-gallery-item--undo"},null,i)),l("</div>")):(l(`<div${U(o({tabindex:"0",class:["va-file-upload-gallery-item",{"file-upload-gallery-item_not-image":!e.previewImage,"va-file-upload-gallery-item--focused":e.isFocused}]},t))}>`),e.previewImage?l(`<img${j("src",e.previewImage)} alt="" class="va-file-upload-gallery-item__image">`):l("\x3c!----\x3e"),l(`<div class="va-file-upload-gallery-item__overlay"><div class="va-file-upload-gallery-item__overlay-background" style="${B(e.overlayStyles)}"></div><div class="va-file-upload-gallery-item__name"${j("title",e.file.name)}>${$(e.file.name)}</div>`),l(b(p,{flat:"",color:"danger",icon:"delete_outline",class:"va-file-upload-gallery-item__delete"},null,i)),l("</div></div>"))},C.__file="src/components/va-file-upload/VaFileUploadGalleryItem/VaFileUploadGalleryItem.vue";var T=e(C),k=l({name:"VaFileUploadSingleItem",components:{VaButton:_},emits:["remove"],props:{file:{type:Object,default:null}}});k.ssrRender=function ssrRender$2(e,l,n,r,d,s,u,p){const m=a("va-button");l(`<div${U(o({class:"va-file-upload-single-item"},r))}><div class="va-file-upload-single-item__name">${$(e.file&&e.file.name)}</div>`),l(b(m,{flat:"",color:"danger",size:"small",class:"va-file-upload-single-item__button"},{default:i(((e,l,a,o)=>{if(!l)return[t(" Delete ")];l(" Delete ")})),_:1},n)),l("</div>")},k.__file="src/components/va-file-upload/VaFileUploadSingleItem/VaFileUploadSingleItem.vue";var w=e(k),A=l({name:"VaFileUploadList",components:{VaFileUploadListItem:z,VaFileUploadGalleryItem:T,VaFileUploadSingleItem:w},emits:["remove","removeSingle"],props:{type:{type:String,default:""},files:{type:Array,default:null},color:{type:String,default:"success"},undo:{type:Boolean,default:!1},undoDuration:{type:Number,default:3e3}},setup(e){const l=p((()=>e.files.map(convertFile))),convertFile=e=>({name:e.name||e.url||"",size:formatSize(e.size),date:formatDate(new Date),image:e}),formatSize=e=>{if(0===e)return"0 Bytes";if(!e)return"";const l=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,l)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][l]},formatDate=(e=new Date)=>e.toLocaleDateString("en-US",{hour:"2-digit",minute:"2-digit",month:"short",day:"numeric",year:"numeric"});return{filesList:l}}});A.ssrRender=function ssrRender$1(e,l,i,t,n,r,d,s){const u=a("va-file-upload-list-item"),p=a("va-file-upload-gallery-item"),m=a("va-file-upload-single-item");l(`<div${U(o({class:["va-file-upload-list",`va-file-upload-list--${e.type}`]},t))}>`),"list"===e.type?(l("\x3c!--[--\x3e"),S(e.filesList,((a,o)=>{l(b(u,{key:a.name,file:a,color:e.color,undo:e.undo,undoDuration:e.undoDuration},null,i))})),l("\x3c!--]--\x3e")):l("\x3c!----\x3e"),"gallery"===e.type?(l("\x3c!--[--\x3e"),S(e.filesList,((a,o)=>{l(b(p,{file:a,key:a.name,color:e.color,undo:e.undo,undoDuration:e.undoDuration},null,i))})),l("\x3c!--]--\x3e")):l("\x3c!----\x3e"),"single"===e.type&&e.filesList.length?l(b(m,{file:e.filesList[e.filesList.length-1]},null,i)):l("\x3c!----\x3e"),l("</div>")},A.__file="src/components/va-file-upload/VaFileUploadList/VaFileUploadList.vue";var M=e(A),G=l({name:"VaFileUpload",components:{VaModal:F,VaButton:_,VaFileUploadList:M},props:{fileTypes:{type:String,default:""},dropzone:{type:Boolean,default:!1},color:{type:String,default:"primary"},disabled:{type:Boolean,default:!1},undo:{type:Boolean,default:!1},undoDuration:{type:Number,default:3e3},dropZoneText:{type:String,default:"Drag’n’drop files or"},uploadButtonText:{type:String,default:"Upload file"},modelValue:{type:Array,default:()=>[],validator:e=>Array.isArray(e)},type:{type:String,default:"list",validator:e=>["list","gallery","single"].includes(e)}},emits:["update:modelValue","file-removed","file-added"],setup(e,{emit:l}){const a=n(!1),o=n(!1),i=v(null),{getColor:t}=g(),r=p((()=>t(e.color))),d=p((()=>e.dropzone?{backgroundColor:y(r.value,{a:o.value?-.82:-.92})}:{backgroundColor:"transparent"})),s=p({get:()=>e.modelValue,set(e){l("update:modelValue",e)}}),validateFiles=l=>l.filter((l=>{const o=l.name||l.url;if(!o)return!1;if(l.url)return!0;if(["audio/*","video/*","image/*"].find((l=>e.fileTypes.includes(l))))return!0;const i=o.substring(o.lastIndexOf(".")+1).toLowerCase(),t=e.fileTypes.includes(i);return t||(a.value=!0),t})),uploadFile=a=>{var o,i;const t=(null===(o=a.target)||void 0===o?void 0:o.files)||(null===(i=a.dataTransfer)||void 0===i?void 0:i.files);if(!t)return;const n=e.fileTypes?validateFiles(Array.from(t)):t;s.value=[...s.value,...n],l("file-added",n)};return m((()=>{Array.isArray(s.value)&&(s.value=validateFiles(s.value))})),{modal:a,dropzoneHighlight:o,fileInputRef:i,colorComputed:r,computedStyle:d,uploadFile:uploadFile,changeFieldValue:e=>{uploadFile(e),i.value&&(i.value.value="")},files:s,removeFile:e=>{if(e in s.value){const a=s.value[e];s.value=s.value.filter(((l,a)=>a!==e)),l("file-removed",a)}},removeSingleFile:()=>{if(s.value.length>0){const e=s.value[0];s.value=[],l("file-removed",e)}},callFileDialogue:()=>{i.value&&i.value.click()}}}});G.ssrRender=function ssrRender(e,l,n,r,d,s,p,m){const f=a("va-button"),v=a("va-file-upload-list"),c=a("va-modal");l(`<div${U(o({class:["va-file-upload",{"va-file-upload--dropzone":e.dropzone}],style:e.computedStyle},r))}>`),I(e.$slots,"default",{},(()=>{l('<div class="va-file-upload__field">'),e.dropzone?l(`<div class="va-file-upload__field__text">${$(e.dropZoneText)}</div>`):l("\x3c!----\x3e"),l(b(f,{class:"va-file-upload__field__button",disabled:e.disabled,color:e.colorComputed,style:{"pointer-events":e.dropzoneHighlight?"none":""}},{default:i(((l,a,o,i)=>{if(!a)return[t(u(e.uploadButtonText),1)];a(`${$(e.uploadButtonText)}`)})),_:1},n)),l("</div>")}),l,n),l(`<input type="file" class="va-file-upload__field__input"${j("accept",e.fileTypes)}${D("single"!==e.type)?" multiple":""}${D(e.disabled)?" disabled":""} tabindex="-1">`),e.files.length?l(b(v,{type:e.type,files:e.files,color:e.colorComputed,undo:e.undo,undoDuration:e.undoDuration},null,n)):l("\x3c!----\x3e"),l(b(c,{modelValue:e.modal,"onUpdate:modelValue":l=>e.modal=l,"hide-default-actions":"",title:"File validation",message:"File type is incorrect!"},null,n)),l("</div>")},G.__file="src/components/va-file-upload/VaFileUpload.vue";var N=e(G);export{T as VaFileUploadGalleryItem,M as VaFileUploadList,z as VaFileUploadListItem,w as VaFileUploadSingleItem,h as VaFileUploadUndo,N as default};
//# sourceMappingURL=index26.js.map
