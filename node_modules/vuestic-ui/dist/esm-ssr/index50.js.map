{"version":3,"file":"index50.js","sources":["../../src/components/va-option-list/VaOptionList.vue","../../src/components/va-option-list/VaOptionList.vue?vue&type=template&id=69ca68d9&lang.js","../../src/components/va-option-list/index.ts"],"sourcesContent":["<template>\n  <VaMessageListWrapper\n    :error=\"computedError\"\n    :error-messages=\"computedErrorMessages\"\n    :error-count=\"$props.errorCount\"\n  >\n    <ul class=\"va-option-list__list\">\n      <li\n        v-for=\"(option, index) in $props.options\"\n        :key=\"getKey(option)\"\n      >\n        <slot v-bind=\"{ option, selectedValue, index, isDisabled, getText, getValue }\">\n          <va-radio\n            v-if=\"$props.type === 'radio'\"\n            :ref=\"setItemRef\"\n            v-model=\"selectedValue\"\n            :label=\"getText(option)\"\n            :disabled=\"isDisabled(option)\"\n            :option=\"getValue(option)\"\n            :tabindex=\"index\"\n            v-bind=\"computedProps\"\n          />\n          <va-checkbox\n            v-else-if=\"$props.type === 'checkbox'\"\n            :ref=\"setItemRef\"\n            v-model=\"selectedValue\"\n            :label=\"getText(option)\"\n            :disabled=\"isDisabled(option)\"\n            :array-value=\"getValue(option)\"\n            v-bind=\"computedProps\"\n          />\n          <va-switch\n            v-else\n            :ref=\"setItemRef\"\n            v-model=\"selectedValue\"\n            :label=\"getText(option)\"\n            :disabled=\"isDisabled(option)\"\n            :array-value=\"getValue(option)\"\n            v-bind=\"computedProps\"\n          />\n        </slot>\n      </li>\n    </ul>\n  </VaMessageListWrapper>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, PropType, onMounted } from 'vue'\nimport pick from 'lodash/pick'\n\nimport { generateUniqueId } from '../../services/utils'\nimport { __DEV__ } from '../../utils/global-utils'\nimport { useSelectableList, useSelectableListProps, SelectableOption } from '../../composables/useSelectableList'\nimport { useValidation, useValidationProps } from '../../composables/useValidation'\nimport { useStateful, useStatefulProps, useStatefulEmits } from '../../composables/useStateful'\nimport { useArrayRefs } from '../../composables/useArrayRefs'\nimport { VaMessageListWrapper } from '../va-input'\nimport VaCheckbox from '../va-checkbox'\nimport VaRadio from '../va-radio'\nimport VaSwitch from '../va-switch'\n\ntype OptionListValue = SelectableOption | SelectableOption[] | null\n\nexport default defineComponent({\n  name: 'VaOptionList',\n  components: {\n    VaRadio,\n    VaCheckbox,\n    VaSwitch,\n    VaMessageListWrapper,\n  },\n  emits: [...useStatefulEmits],\n  props: {\n    ...useSelectableListProps,\n    ...useValidationProps,\n    ...useStatefulProps,\n    type: {\n      type: String as PropType<'radio' | 'checkbox' | 'switch'>,\n      default: 'checkbox',\n      validator: (type: any) => ['radio', 'checkbox', 'switch'].includes(type),\n    },\n    disabled: ({ type: Boolean as PropType<boolean>, default: false }),\n    readonly: ({ type: Boolean as PropType<boolean>, default: false }),\n    defaultValue: ({ type: [String, Number, Object, Array] as PropType<OptionListValue | null> }),\n    name: ({ type: String as PropType<string>, default: generateUniqueId }),\n    color: ({ type: String as PropType<string>, default: 'primary' }),\n    leftLabel: ({ type: Boolean, default: false }),\n    modelValue: ({ type: [String, Number, Object, Array] as PropType<OptionListValue | null> }),\n  },\n\n  setup (props, { emit }) {\n    const { valueComputed } = useStateful(props, emit, props.defaultValue)\n\n    const { getValue, getText, getTrackBy, getDisabled } = useSelectableList(props)\n\n    const { itemRefs, setItemRef } = useArrayRefs()\n\n    const isRadio = computed(() => props.type === 'radio')\n\n    const selectedValue = computed({\n      get () {\n        const value = isRadio.value ? null : []\n\n        return valueComputed.value || value as OptionListValue\n      },\n      set (value: OptionListValue) {\n        if (props.readonly) { return }\n\n        if (isRadio.value && !Array.isArray(value)) {\n          valueComputed.value = value ? getValue(value) : value\n        } else {\n          valueComputed.value = Array.isArray(value)\n            ? value.map(getValue)\n            : [value ? getValue(value) : value]\n        }\n      },\n    })\n\n    const getKey = (option: SelectableOption) => getTrackBy(option)\n\n    const isDisabled = (option: SelectableOption) => props.disabled || getDisabled(option)\n\n    const reset = () => { valueComputed.value = undefined }\n\n    const focus = () => {\n      const firstActiveEl = Array.isArray(itemRefs.value) && itemRefs.value.find(el => !(el as HTMLInputElement).disabled)\n\n      if (firstActiveEl && typeof firstActiveEl.focus === 'function') {\n        firstActiveEl.focus()\n      }\n    }\n\n    const { computedError, computedErrorMessages } = useValidation(props, emit, reset, focus)\n\n    const computedProps = computed(() => pick(props, ['name', 'color', 'readonly', 'leftLabel']))\n\n    onMounted(() => {\n      if (__DEV__ && props.type !== 'radio' && !Array.isArray(props.modelValue)) {\n        console.warn(`Prop 'modelValue = ${props.modelValue}' has not a proper type!\\n For component property 'type = ${props.type}' it must be of type 'array'.`)\n      }\n    })\n\n    return {\n      selectedValue,\n      computedError,\n      computedErrorMessages,\n      getValue,\n      getText,\n      getKey,\n      isDisabled,\n      reset,\n      focus,\n      setItemRef,\n      computedProps,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import 'variables';\n\n.va-option-list {\n  &__list {\n    line-height: var(--va-option-list-line-height);\n  }\n}\n</style>\n","<template>\n  <VaMessageListWrapper\n    :error=\"computedError\"\n    :error-messages=\"computedErrorMessages\"\n    :error-count=\"$props.errorCount\"\n  >\n    <ul class=\"va-option-list__list\">\n      <li\n        v-for=\"(option, index) in $props.options\"\n        :key=\"getKey(option)\"\n      >\n        <slot v-bind=\"{ option, selectedValue, index, isDisabled, getText, getValue }\">\n          <va-radio\n            v-if=\"$props.type === 'radio'\"\n            :ref=\"setItemRef\"\n            v-model=\"selectedValue\"\n            :label=\"getText(option)\"\n            :disabled=\"isDisabled(option)\"\n            :option=\"getValue(option)\"\n            :tabindex=\"index\"\n            v-bind=\"computedProps\"\n          />\n          <va-checkbox\n            v-else-if=\"$props.type === 'checkbox'\"\n            :ref=\"setItemRef\"\n            v-model=\"selectedValue\"\n            :label=\"getText(option)\"\n            :disabled=\"isDisabled(option)\"\n            :array-value=\"getValue(option)\"\n            v-bind=\"computedProps\"\n          />\n          <va-switch\n            v-else\n            :ref=\"setItemRef\"\n            v-model=\"selectedValue\"\n            :label=\"getText(option)\"\n            :disabled=\"isDisabled(option)\"\n            :array-value=\"getValue(option)\"\n            v-bind=\"computedProps\"\n          />\n        </slot>\n      </li>\n    </ul>\n  </VaMessageListWrapper>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, PropType, onMounted } from 'vue'\nimport pick from 'lodash/pick'\n\nimport { generateUniqueId } from '../../services/utils'\nimport { __DEV__ } from '../../utils/global-utils'\nimport { useSelectableList, useSelectableListProps, SelectableOption } from '../../composables/useSelectableList'\nimport { useValidation, useValidationProps } from '../../composables/useValidation'\nimport { useStateful, useStatefulProps, useStatefulEmits } from '../../composables/useStateful'\nimport { useArrayRefs } from '../../composables/useArrayRefs'\nimport { VaMessageListWrapper } from '../va-input'\nimport VaCheckbox from '../va-checkbox'\nimport VaRadio from '../va-radio'\nimport VaSwitch from '../va-switch'\n\ntype OptionListValue = SelectableOption | SelectableOption[] | null\n\nexport default defineComponent({\n  name: 'VaOptionList',\n  components: {\n    VaRadio,\n    VaCheckbox,\n    VaSwitch,\n    VaMessageListWrapper,\n  },\n  emits: [...useStatefulEmits],\n  props: {\n    ...useSelectableListProps,\n    ...useValidationProps,\n    ...useStatefulProps,\n    type: {\n      type: String as PropType<'radio' | 'checkbox' | 'switch'>,\n      default: 'checkbox',\n      validator: (type: any) => ['radio', 'checkbox', 'switch'].includes(type),\n    },\n    disabled: ({ type: Boolean as PropType<boolean>, default: false }),\n    readonly: ({ type: Boolean as PropType<boolean>, default: false }),\n    defaultValue: ({ type: [String, Number, Object, Array] as PropType<OptionListValue | null> }),\n    name: ({ type: String as PropType<string>, default: generateUniqueId }),\n    color: ({ type: String as PropType<string>, default: 'primary' }),\n    leftLabel: ({ type: Boolean, default: false }),\n    modelValue: ({ type: [String, Number, Object, Array] as PropType<OptionListValue | null> }),\n  },\n\n  setup (props, { emit }) {\n    const { valueComputed } = useStateful(props, emit, props.defaultValue)\n\n    const { getValue, getText, getTrackBy, getDisabled } = useSelectableList(props)\n\n    const { itemRefs, setItemRef } = useArrayRefs()\n\n    const isRadio = computed(() => props.type === 'radio')\n\n    const selectedValue = computed({\n      get () {\n        const value = isRadio.value ? null : []\n\n        return valueComputed.value || value as OptionListValue\n      },\n      set (value: OptionListValue) {\n        if (props.readonly) { return }\n\n        if (isRadio.value && !Array.isArray(value)) {\n          valueComputed.value = value ? getValue(value) : value\n        } else {\n          valueComputed.value = Array.isArray(value)\n            ? value.map(getValue)\n            : [value ? getValue(value) : value]\n        }\n      },\n    })\n\n    const getKey = (option: SelectableOption) => getTrackBy(option)\n\n    const isDisabled = (option: SelectableOption) => props.disabled || getDisabled(option)\n\n    const reset = () => { valueComputed.value = undefined }\n\n    const focus = () => {\n      const firstActiveEl = Array.isArray(itemRefs.value) && itemRefs.value.find(el => !(el as HTMLInputElement).disabled)\n\n      if (firstActiveEl && typeof firstActiveEl.focus === 'function') {\n        firstActiveEl.focus()\n      }\n    }\n\n    const { computedError, computedErrorMessages } = useValidation(props, emit, reset, focus)\n\n    const computedProps = computed(() => pick(props, ['name', 'color', 'readonly', 'leftLabel']))\n\n    onMounted(() => {\n      if (__DEV__ && props.type !== 'radio' && !Array.isArray(props.modelValue)) {\n        console.warn(`Prop 'modelValue = ${props.modelValue}' has not a proper type!\\n For component property 'type = ${props.type}' it must be of type 'array'.`)\n      }\n    })\n\n    return {\n      selectedValue,\n      computedError,\n      computedErrorMessages,\n      getValue,\n      getText,\n      getKey,\n      isDisabled,\n      reset,\n      focus,\n      setItemRef,\n      computedProps,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import 'variables';\n\n.va-option-list {\n  &__list {\n    line-height: var(--va-option-list-line-height);\n  }\n}\n</style>\n","import withConfigTransport from '../../services/config-transport/withConfigTransport'\nimport VaOptionList from './VaOptionList.vue'\n\nexport default withConfigTransport(VaOptionList)\n"],"names":["defineComponent","name","components","VaRadio","VaCheckbox","VaSwitch","VaMessageListWrapper","emits","useStatefulEmits","props","useSelectableListProps","useValidationProps","useStatefulProps","type","String","default","validator","includes","disabled","Boolean","readonly","defaultValue","Number","Object","Array","generateUniqueId","color","leftLabel","modelValue","setup","emit","valueComputed","useStateful","getValue","getText","getTrackBy","getDisabled","useSelectableList","itemRefs","setItemRef","useArrayRefs","isRadio","computed","selectedValue","get","value","set","isArray","map","reset","undefined","focus","firstActiveEl","find","el","computedError","computedErrorMessages","useValidation","computedProps","pick","onMounted","__DEV__","console","warn","getKey","option","isDisabled","_mergeProps","error","_ctx","errorCount","_createVNode","class","_createBlock","options","index","key","_renderSlot","ref","label","tabindex","withConfigTransport","VaOptionList"],"mappings":"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"}