import{w as e}from"./withConfigTransport.js";import{defineComponent as l,ref as a,computed as t,onMounted as r,onBeforeUnmount as o,mergeProps as v}from"vue";import{ssrRenderAttrs as u,ssrRenderAttr as n,ssrRenderStyle as i,ssrRenderSlot as s}from"@vue/server-renderer";import"./VaConfig.js";import"./global-config.js";var d=l({name:"VaParallax",props:{target:{type:[Object,String]},src:{type:String,default:"",required:!0},alt:{type:String,default:"parallax"},height:{type:Number,default:400},reversed:{type:Boolean,default:!1},speed:{type:Number,default:.5,validator:e=>e>=0&&e<=1}},setup(e){const l=a(0),v=a(0),u=a(0),n=a(0),i=a(0),s=a(0),d=a(0),p=a(!1),c=t((()=>({height:e.height+"px"}))),m=t((()=>({display:"block",transform:`translate(-50%, ${v.value}px)`,opacity:p.value?1:0,top:e.reversed?0:"auto"}))),g=a(null),f=t((()=>{var l;if("string"!=typeof e.target)return getScrollableParent(null===(l=g.value)||void 0===l?void 0:l.parentElement);const a=document.querySelector(e.target);if(a)return a;throw new Error("VaParallax target prop got wrong selector. Target is null")})),getScrollableParent=e=>e?e.scrollHeight>e.clientHeight?e:getScrollableParent(e.parentElement):document.body,h=a(null),y=t((()=>{var e;return(null===(e=h.value)||void 0===e?void 0:e.naturalHeight)||0})),translate=()=>{(()=>{var a,t;const r=(null===(a=g.value)||void 0===a?void 0:a.getBoundingClientRect())||{top:0};i.value=(null===(t=f.value)||void 0===t?void 0:t.scrollTop)||0,u.value=y.value-e.height,l.value=r.top+i.value,s.value=window.innerHeight,d.value=i.value+s.value})(),n.value=(d.value-l.value)/(e.height+s.value),v.value=Math.round(u.value*n.value)*e.speed,e.reversed&&(v.value=-v.value)},addEventListeners=()=>{var e,l;null===(e=f.value)||void 0===e||e.addEventListener("scroll",translate),null===(l=f.value)||void 0===l||l.addEventListener("resize",translate)};return r((()=>{var e,l;(null===(e=h.value)||void 0===e?void 0:e.complete)?(translate(),addEventListeners()):null===(l=h.value)||void 0===l||l.addEventListener("load",(()=>{translate(),addEventListeners()}),!1),p.value=!0})),o((()=>{var e,l;null===(e=f.value)||void 0===e||e.removeEventListener("scroll",translate),null===(l=f.value)||void 0===l||l.removeEventListener("resize",translate)})),{img:h,rootElement:g,computedWrapperStyles:c,computedImgStyles:m}}});d.ssrRender=function ssrRender(e,l,a,t,r,o,d,p){l(`<div${u(v({class:"va-parallax",style:e.computedWrapperStyles,ref:"rootElement"},t))}><div class="va-parallax__image-container"><img class="va-parallax__image"${n("src",e.$props.src)}${n("alt",e.$props.alt)} style="${i(e.computedImgStyles)}"></div><div class="va-parallax__item-container">`),s(e.$slots,"default",{},null,l,a),l("</div></div>")},d.__file="src/components/va-parallax/VaParallax.vue";var p=e(d);export{p as default};
//# sourceMappingURL=index36.js.map
