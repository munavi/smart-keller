import{watch as e,inject as r,onMounted as s,onBeforeUnmount as o,defineComponent as a,computed as t,mergeProps as l}from"vue";import{f as u}from"./flatten.js";import{p as i,i as n,q as m,r as d}from"./global-config.js";import{u as p}from"./useSyncProp.js";import{F as c}from"./consts.js";import{u as f}from"./useFocus.js";import{w as g}from"./withConfigTransport.js";import{a as v}from"./useColor.js";import{ssrRenderAttrs as y,ssrRenderList as V,ssrInterpolate as S}from"@vue/server-renderer";var j=i,M=n,h=m;var x=function isString(e){return"string"==typeof e||!M(e)&&h(e)&&"[object String]"==j(e)};const A={modelValue:{required:!1},error:{type:Boolean,default:void 0},errorMessages:{type:[Array,String],default:void 0},errorCount:{type:[String,Number],default:1},rules:{type:Array,default:()=>[]},success:{type:Boolean,default:!1},messages:{type:[Array,String],default:()=>[]},immediateValidation:{type:Boolean,default:!1}},C=["update:error","update:errorMessages"],useValidation=(a,t,l,i)=>{const{isFocused:n,onFocus:m,onBlur:g}=f(),[v]=p("error",a,t,!1),[y]=p("errorMessages",a,t,[]),resetValidation=()=>{v.value=!1,y.value=[]},validate=()=>{if(!a.rules||!a.rules.length)return!0;let e=!1,r=[];return((e=[],r=null)=>(x(e)&&(e=[e]),e.map((e=>d(e)?e(r):e))))(u(a.rules),a.modelValue).forEach((s=>{x(s)?(r=[...r,s],e=!0):!1===s&&(e=!0)})),y.value=r,v.value=e,!e};e(n,(e=>!e&&validate())),e((()=>a.modelValue),(()=>validate()),{immediate:a.immediateValidation});const V={resetValidation:resetValidation,focus:i,validate:validate,reset:l,hasError:()=>v.value},S=r(c,void 0);return s((()=>{null==S||S.onChildMounted(V)})),o((()=>{null==S||S.onChildUnmounted(V)})),{computedError:v,computedErrorMessages:y,listeners:{onFocus:m,onBlur:g},validate:validate,resetValidation:resetValidation}};var b=a({name:"VaMessageList",props:{modelValue:{type:[String,Array],default:""},limit:{type:Number,default:1},color:{type:String}},setup(e){const{colorComputed:r}=v(e);return{messages:t((()=>e.modelValue?Array.isArray(e.modelValue)?e.modelValue.slice(0,e.limit):[e.modelValue]:[])),computedStyle:t((()=>e.color?{color:r.value}:{}))}}});b.ssrRender=function ssrRender(e,r,s,o,a,t,u,i){e.messages.length?(r(`<div${y(l({class:"va-message-list",style:e.computedStyle},o))}>\x3c!--[--\x3e`),V(e.messages,((e,s)=>{r(`<div class="va-message-list__message">${S(e)}</div>`)})),r("\x3c!--]--\x3e</div>")):r("\x3c!----\x3e")},b.__file="src/components/va-input/components/VaMessageList/VaMessageList.vue";var B=g(b);export{B as V,useValidation as a,A as b,C as u};
//# sourceMappingURL=index66.js.map
