import{w as o}from"./withConfigTransport.js";import{ref as e,defineComponent as n,shallowRef as r,computed as t,watch as l,nextTick as s,resolveComponent as p,mergeProps as a,withCtx as i,toHandlers as d,createSlots as u,renderSlot as c,openBlock as m,createBlock as f,createCommentVNode as w,renderList as v,createVNode as I,withKeys as g,withModifiers as V}from"vue";import{s as h,o as y}from"./VaIcon.js";import{s as j}from"./VaTimePicker.js";import{s as k,u as D,a as P}from"./VaInput.js";import S,{VaDropdownContent as T}from"./index25.js";import{u as C}from"./useSyncProp.js";import{u as O,a as b}from"./index66.js";import{e as _,f as x}from"./child-props.js";import{g as $}from"./utils.js";import{ssrRenderComponent as B,ssrRenderSlot as U}from"@vue/server-renderer";import"./VaConfig.js";import"./global-config.js";import"./isSymbol.js";import"./flatten.js";import"./color-config.js";import"colortranslator";import"./useSize.js";import"./useFocus.js";import"./useStateful.js";import"./useForm.js";import"./useArrayRefs.js";import"cleave.js";import"./useEmitProxy.js";import"./VaInputWrapper.js";import"./pick.js";import"./VaDropdown.js";import"./debounce.js";import"./toNumber.js";import"./ssr-utils.js";import"./useTextColor.js";import"./consts.js";import"./useColor.js";const defaultParseDateFunction=o=>{const e=new Date,[n,r,t]=(o=>{const e=o.match(/[0-9]{1,2}/g);return e?e.map((o=>Number(o))):[]})(o),l=(o=>{const e=o.match(/pm|am/i);return e?Number("pm"===e[0].toLowerCase()):null})(o);if(!n)return null;const s=null!==l&&n<=12,p=s&&!!l,a=s&&12===n?0:n;return e.setHours(Math.min(a||0,s?12:24)+(p?12:0)),e.setMinutes(Math.min(r||0,60)),e.setSeconds(Math.min(t||0,60)),e},useTimeParser=o=>{const n=e(!0),parseDate=e=>{const r=(o.parse||defaultParseDateFunction)(e);return r||(n.value=!1),r};return{parse:o=>(n.value=!0,parseDate(o)),isValid:n}},L=[".va-input-wrapper__prepend-inner",".va-input__prepend-inner",".va-input__append-inner",".va-input-wrapper__append-inner"],F=_(k,["mask","returnRaw","autosize","minRows","maxRows","type","inputmode"]);var M=n({name:"VaTimeInput",components:{VaDropdown:S,VaDropdownContent:T,VaTimePicker:j,VaIcon:h,VaInput:k},emits:[...O,...D,"update:modelValue","update:isOpen"],props:{...F,..._(j),isOpen:{type:Boolean,default:void 0},modelValue:{type:Date,default:void 0},clearValue:{type:String,default:void 0},format:{type:Function},parse:{type:Function},manualInput:{type:Boolean,default:!1},leftIcon:{type:Boolean,default:!1},icon:{type:String,default:"schedule"}},inheritAttrs:!1,setup(o,{emit:e,attrs:n,slots:p}){const a=r(),i=r(),d=$(),u=$(),[c]=C("isOpen",o,e,!1),[m]=C("modelValue",o,e),{parse:f,isValid:w}=useTimeParser(o),{format:v}=(o=>{const formatDate=e=>e?o.ampm?e.toLocaleTimeString("en-US"):e.toLocaleTimeString("en-GB"):"",sliceTime=(o,e,n)=>o.split(":").slice(e,n).join(":");return{format:e=>{if("seconds"===o.view)return formatDate(e);const[n,r]=formatDate(e).split(" ");return"minutes"===o.view?r?[sliceTime(n,0,2),r].join(" "):sliceTime(n,0,2):"hours"===o.view?r?[sliceTime(n,0,1),r].join(" "):sliceTime(n,0,1):""}}})(o),I=t((()=>w.value&&m.value?o.format?o.format(m.value):v(m.value):o.clearValue)),reset=()=>{e("update:modelValue",o.clearValue),e("clear")},focus=()=>{var o;null===(o=a.value)||void 0===o||o.focus()},{computedError:g,computedErrorMessages:V,listeners:h}=b(o,e,reset,focus),k=t((()=>!w.value&&I.value!==o.clearValue||g.value)),{canBeCleared:D,clearIconProps:S,onFocus:T,onBlur:O}=P(o,I),B=t((()=>({name:o.icon,color:o.color,size:"small"}))),U=t((()=>({...x(o,F).value,clearable:!1,rules:[],error:k.value,errorMessages:V.value,readonly:o.readonly||!o.manualInput}))),M=t((()=>({focus:()=>{T(),h.onFocus()},blur:()=>{O(),h.onBlur()}}))),R=t((()=>({ariaLabel:o.label,...y(n,["class","style"])}))),A=t((()=>{const e=[o.leftIcon&&"prependInner",(!o.leftIcon||o.clearable)&&"icon"];return Object.keys(p).filter((o=>!e.includes(o)))}));l(m,(()=>{w.value=!0}));const hideDropdown=()=>{c.value=!1,focus()},showDropdown=()=>{o.disabled||o.readonly||(c.value=!0,s((()=>{var o;null===(o=i.value)||void 0===o||o.focus()})))},dropdownToggle=()=>{c.value?hideDropdown():showDropdown()};return{input:a,timePicker:i,clearIconId:d,componentIconId:u,timePickerProps:x(o,_(j)),computedInputProps:U,computedInputAttrs:R,computedInputListeners:M,isOpenSync:c,modelValueSync:m,valueText:I,onInputTextChanged:o=>{const e=f(o);w.value&&e&&(m.value=e)},onValueInput:o=>{!o&&reset()},canBeCleared:D,iconProps:B,clearIconProps:S,filterSlots:A,hideDropdown:hideDropdown,showDropdown:showDropdown,dropdownToggle:dropdownToggle,handleComponentClick:e=>{var n,r;const t=null===(n=e.target)||void 0===n?void 0:n.id;if(t===d)return focus();if(t===u)return null===(r=i.value)||void 0===r?void 0:r.focus();return L.some((o=>{var n;return!!(null===(n=e.target)||void 0===n?void 0:n.closest(o))}))?void 0:o.manualInput?c.value&&hideDropdown():void dropdownToggle()},reset:reset,focus:focus,blur:()=>{var o;null===(o=a.value)||void 0===o||o.blur()}}}});M.ssrRender=function ssrRender(o,e,n,r,t,l,s,h){const y=p("va-dropdown"),j=p("va-input"),k=p("va-icon"),D=p("va-dropdown-content"),P=p("va-time-picker");e(B(y,a({class:["va-time-input",o.$attrs.class],style:o.$attrs.style,modelValue:o.isOpenSync,"onUpdate:modelValue":e=>o.isOpenSync=e,placement:"bottom-start",offset:[2,0],"close-on-content-click":!1,disabled:o.$props.disabled,anchorSelector:".va-input__container",stateful:!1,trigger:"none"},r),{anchor:i(((e,n,r,t)=>{if(!n)return[I(j,a({ref:"input"},{...o.computedInputProps,...o.computedInputAttrs},d(o.computedInputListeners),{modelValue:o.valueText,onChange:e=>o.onInputTextChanged(e.target.value),"onUpdate:modelValue":o.onValueInput}),u({prependInner:i((e=>[c(o.$slots,"prependInner",{...e,dropdownToggle:o.dropdownToggle,showDropdown:o.showDropdown,hideDropdown:o.hideDropdown,isOpen:o.isOpenSync,focus:o.focus}),o.$props.leftIcon?(m(),f(k,a({key:0,id:o.componentIconId},o.iconProps,{onClick:e=>o.dropdownToggle()}),null,16,["id","onClick"])):w("v-if",!0)])),icon:i((()=>[o.canBeCleared?(m(),f(k,a({key:0,id:o.clearIconId},o.clearIconProps,{onClick:e=>o.reset()}),null,16,["id","onClick"])):o.$props.leftIcon?w("v-if",!0):(m(),f(k,a({key:1,id:o.componentIconId},o.iconProps,{onClick:e=>o.dropdownToggle()}),null,16,["id","onClick"]))])),_:2},[v(o.filterSlots,(e=>({name:e,fn:i((n=>[c(o.$slots,e,{...n,dropdownToggle:o.dropdownToggle,showDropdown:o.showDropdown,hideDropdown:o.hideDropdown,isOpen:o.isOpenSync,focus:o.focus})]))})))]),1040,["modelValue","onChange","onUpdate:modelValue"])];n(B(j,a({ref:"input"},{...o.computedInputProps,...o.computedInputAttrs},d(o.computedInputListeners),{modelValue:o.valueText}),u({prependInner:i(((e,n,r,t)=>{if(!n)return[c(o.$slots,"prependInner",{...e,dropdownToggle:o.dropdownToggle,showDropdown:o.showDropdown,hideDropdown:o.hideDropdown,isOpen:o.isOpenSync,focus:o.focus}),o.$props.leftIcon?(m(),f(k,a({key:0,id:o.componentIconId},o.iconProps,{onClick:e=>o.dropdownToggle()}),null,16,["id","onClick"])):w("v-if",!0)];U(o.$slots,"prependInner",{...e,dropdownToggle:o.dropdownToggle,showDropdown:o.showDropdown,hideDropdown:o.hideDropdown,isOpen:o.isOpenSync,focus:o.focus},null,n,r,t),o.$props.leftIcon?n(B(k,a({id:o.componentIconId},o.iconProps),null,r,t)):n("\x3c!----\x3e")})),icon:i(((e,n,r,t)=>{if(!n)return[o.canBeCleared?(m(),f(k,a({key:0,id:o.clearIconId},o.clearIconProps,{onClick:e=>o.reset()}),null,16,["id","onClick"])):o.$props.leftIcon?w("v-if",!0):(m(),f(k,a({key:1,id:o.componentIconId},o.iconProps,{onClick:e=>o.dropdownToggle()}),null,16,["id","onClick"]))];o.canBeCleared?n(B(k,a({id:o.clearIconId},o.clearIconProps),null,r,t)):o.$props.leftIcon?n("\x3c!----\x3e"):n(B(k,a({id:o.componentIconId},o.iconProps),null,r,t))})),_:2},[v(o.filterSlots,(e=>({name:e,fn:i(((n,r,t,l)=>{if(!r)return[c(o.$slots,o.name,{...n,dropdownToggle:o.dropdownToggle,showDropdown:o.showDropdown,hideDropdown:o.hideDropdown,isOpen:o.isOpenSync,focus:o.focus})];U(o.$slots,e,{...n,dropdownToggle:o.dropdownToggle,showDropdown:o.showDropdown,hideDropdown:o.hideDropdown,isOpen:o.isOpenSync,focus:o.focus},null,r,t,l)}))})))]),r,t))})),default:i(((e,n,r,t)=>{if(!n)return[I(D,{"no-padding":"",onKeydown:g(V((e=>o.hideDropdown()),["prevent"]),["esc"])},{default:i((()=>[I(P,a({ref:"timePicker"},o.timePickerProps,{modelValue:o.modelValueSync,"onUpdate:modelValue":e=>o.modelValueSync=e}),null,16,["modelValue","onUpdate:modelValue"])])),_:1},8,["onKeydown"])];n(B(D,{"no-padding":""},{default:i(((e,n,r,t)=>{if(!n)return[I(P,a({ref:"timePicker"},o.timePickerProps,{modelValue:o.modelValueSync,"onUpdate:modelValue":e=>o.modelValueSync=e}),null,16,["modelValue","onUpdate:modelValue"])];n(B(P,a({ref:"timePicker"},o.timePickerProps,{modelValue:o.modelValueSync,"onUpdate:modelValue":e=>o.modelValueSync=e}),null,r,t))})),_:1},r,t))})),_:3},n))},M.__file="src/components/va-time-input/VaTimeInput.vue";const R=o(M);export{R as VaTimeInput};
//# sourceMappingURL=index53.js.map
