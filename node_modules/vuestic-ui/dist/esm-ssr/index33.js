import{w as e}from"./withConfigTransport.js";import{defineComponent as o,ref as t,computed as l,watch as a,h as s,Transition as r,resolveComponent as i,mergeProps as n,withCtx as d,createTextVNode as m,toDisplayString as c,openBlock as u,createBlock as v,createCommentVNode as p,createVNode as f,renderSlot as y}from"vue";import{u as $,a as g,b as x}from"./useStateful.js";import{u as h}from"./color-config.js";import{u as _}from"./useTextColor.js";import k from"./index9.js";import C from"./index28.js";import{ssrRenderAttrs as T,ssrRenderSlot as E,ssrRenderTeleport as b,ssrRenderComponent as B,ssrRenderStyle as S,ssrRenderClass as A,ssrInterpolate as L}from"@vue/server-renderer";import"./VaConfig.js";import"./global-config.js";import"colortranslator";import"./VaButton.js";import"./useColor.js";import"./useRouterLink.js";import"./useSize.js";import"./useLoading.js";import"./index39.js";import"./clamp.js";import"./toNumber.js";import"./isSymbol.js";import"./VaIcon.js";import"./flatten.js";const j=o({name:"ModalElement",inheritAttrs:!1,props:{isTransition:{type:Boolean,default:!0}},setup:(e,{slots:o,attrs:t})=>()=>{var l;return e.isTransition?s(r,{...t},o):null===(l=o.default)||void 0===l?void 0:l.call(o,t)}});var w=o({name:"VaModal",inheritAttrs:!1,components:{VaButton:k,VaIcon:C,ModalElement:j},emits:[...$,"cancel","ok","before-open","open","before-close","close","click-outside"],props:{...g,modelValue:{type:Boolean,default:!1},attachElement:{type:String,default:"body"},disableAttachment:{type:Boolean,default:!1},title:{type:String,default:""},message:{type:String,default:""},okText:{type:String,default:"OK"},cancelText:{type:String,default:"Cancel"},hideDefaultActions:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},mobileFullscreen:{type:Boolean,default:!0},noDismiss:{type:Boolean,default:!1},noOutsideDismiss:{type:Boolean,default:!1},noEscDismiss:{type:Boolean,default:!1},maxWidth:{type:String,default:""},maxHeight:{type:String,default:""},anchorClass:{type:String},size:{type:String,default:"medium",validator:e=>["medium","small","large"].includes(e)},fixedLayout:{type:Boolean,default:!1},withoutTransitions:{type:Boolean,default:!1},overlay:{type:Boolean,default:!0},overlayOpacity:{type:[Number,String],default:.6},blur:{type:Boolean,default:!1},zIndex:{type:[Number,String],default:void 0},backgroundColor:{type:String,default:"white"}},setup(e,{emit:o}){const{getColor:s}=h(),{textColorComputed:r}=_(e.backgroundColor),i=t(),n=t(),{valueComputed:d}=x(e,o),m=l((()=>({"va-modal--fullscreen":e.fullscreen,"va-modal--mobile-fullscreen":e.mobileFullscreen,"va-modal--fixed-layout":e.fixedLayout,[`va-modal--size-${e.size}`]:"medium"!==e.size}))),c=l((()=>({"z-index":e.zIndex}))),u=l((()=>({maxWidth:e.maxWidth,maxHeight:e.maxHeight,color:r.value,background:s(e.backgroundColor)}))),v=l((()=>{const o=!!document.querySelectorAll(".va-modal__overlay").length;if(e.overlay&&!o)return{"background-color":`rgba(0, 0, 0, ${e.overlayOpacity})`,"z-index":e.zIndex&&Number(e.zIndex)-1}})),hide=()=>{d.value=!1},cancel=()=>{hide(),o("cancel")},listenKeyUp=o=>{o.modalsCounter=o.modalsCounter?o.modalsCounter+1:1;const t=o.modalsCounter;setTimeout((()=>{"Escape"!==o.code||e.noEscDismiss||e.noDismiss||o.modalsCounter!==t||cancel()}))};a(d,(o=>{o?window.addEventListener("keyup",listenKeyUp):window.removeEventListener("keyup",listenKeyUp),e.blur&&(o?document.body.classList.add("va-modal-overlay-background--blurred"):document.body.classList.remove("va-modal-overlay-background--blurred"))}));const p={show:()=>{d.value=!0},hide:hide,toggle:()=>{d.value=!d.value},cancel:cancel,ok:()=>{hide(),o("ok")},onOutsideClick:()=>{e.noOutsideDismiss||e.noDismiss||(o("click-outside"),cancel())},onBeforeEnterTransition:e=>o("before-open",e),onAfterEnterTransition:e=>o("open",e),onBeforeLeaveTransition:e=>o("before-close",e),onAfterLeaveTransition:e=>o("close",e),listenKeyUp:listenKeyUp};return{getColor:s,rootElement:i,modal:n,valueComputed:d,computedClass:m,computedDialogStyle:u,computedModalContainerStyle:c,computedOverlayStyles:v,...p}},methods:{show(){var e;null===(e=this.rootElement)||void 0===e||e.show()},hide(){var e;null===(e=this.rootElement)||void 0===e||e.hide()},toggle(){var e;null===(e=this.rootElement)||void 0===e||e.toggle()},cancel(){var e;null===(e=this.rootElement)||void 0===e||e.cancel()},ok(){var e;null===(e=this.rootElement)||void 0===e||e.ok()},onOutsideClick(){var e;null===(e=this.rootElement)||void 0===e||e.onOutsideClick()},onBeforeEnterTransition(){var e;null===(e=this.rootElement)||void 0===e||e.onBeforeEnterTransition()},onAfterEnterTransition(){var e;null===(e=this.rootElement)||void 0===e||e.onAfterEnterTransition()},onBeforeLeaveTransition(){var e;null===(e=this.rootElement)||void 0===e||e.onBeforeLeaveTransition()},onAfterLeaveTransition(){var e;null===(e=this.rootElement)||void 0===e||e.onAfterLeaveTransition()},listenKeyUp(){var e;null===(e=this.rootElement)||void 0===e||e.listenKeyUp()}}});w.ssrRender=function ssrRender(e,o,t,l,a,s,r,$){const g=i("modal-element"),x=i("va-icon"),h=i("va-button");o(`<div${T(n({ref:"rootElement",class:["va-modal-entry",e.$props.anchorClass]},l))}>`),e.$slots.anchor?(o('<div class="va-modal__anchor">'),E(e.$slots,"anchor",{show:e.show,hide:e.hide,toggle:e.toggle},null,o,t),o("</div>")):o("\x3c!----\x3e"),b(o,(o=>{o(B(g,n({name:"va-modal",isTransition:!e.$props.withoutTransitions,appear:"",duration:300},e.$attrs),{default:d(((o,t,l,a)=>{if(!t)return[e.valueComputed?(u(),v("div",{key:0,class:"va-modal"},[e.$props.overlay?(u(),v("div",{key:0,class:"va-modal__overlay",style:e.computedOverlayStyles,onClick:e.onOutsideClick},null,12,["onClick"])):p("v-if",!0),f("div",{class:"va-modal__container",style:e.computedModalContainerStyle,onBeforeEnter:e.onBeforeEnterTransition,onAfterEnter:e.onAfterEnterTransition,onBeforeLeave:e.onBeforeLeaveTransition,onAfterLeave:e.onAfterLeaveTransition},[f("div",{class:["va-modal__dialog",e.computedClass],style:e.computedDialogStyle},[e.$props.fullscreen?(u(),v(x,{key:0,onClick:e.cancel,name:"close",class:"va-modal__close"},null,8,["onClick"])):p("v-if",!0),f("div",{class:"va-modal__inner",style:{maxWidth:e.$props.maxWidth,maxHeight:e.$props.maxHeight}},[e.title?(u(),v("div",{key:0,class:"va-modal__title",style:{color:e.getColor("primary")}},c(e.$props.title),5)):p("v-if",!0),e.$slots.header?(u(),v("div",{key:1,class:"va-modal__header"},[y(e.$slots,"header")])):p("v-if",!0),e.$props.message?(u(),v("div",{key:2,class:"va-modal__message"},c(e.$props.message),1)):p("v-if",!0),e.$slots.default?(u(),v("div",{key:3,class:"va-modal__message"},[y(e.$slots,"default")])):p("v-if",!0),!e.$props.cancelText&&!e.$props.okText||e.$props.hideDefaultActions?p("v-if",!0):(u(),v("div",{key:4,class:"va-modal__footer"},[e.$props.cancelText?(u(),v(h,{key:0,color:"gray",class:"mr-2",flat:"",onClick:e.cancel},{default:d((()=>[m(c(e.$props.cancelText),1)])),_:1},8,["onClick"])):p("v-if",!0),f(h,{onClick:e.ok},{default:d((()=>[m(c(e.$props.okText),1)])),_:1},8,["onClick"])])),e.$slots.footer?(u(),v("div",{key:5,class:"va-modal__footer"},[y(e.$slots,"footer")])):p("v-if",!0)],4)],6)],44,["onBeforeEnter","onAfterEnter","onBeforeLeave","onAfterLeave"])])):p("v-if",!0)];e.valueComputed?(t(`<div class="va-modal"${a}>`),e.$props.overlay?t(`<div class="va-modal__overlay" style="${S(e.computedOverlayStyles)}"${a}></div>`):t("\x3c!----\x3e"),t(`<div class="va-modal__container" style="${S(e.computedModalContainerStyle)}"${a}><div class="${A([e.computedClass,"va-modal__dialog"])}" style="${S(e.computedDialogStyle)}"${a}>`),e.$props.fullscreen?t(B(x,{name:"close",class:"va-modal__close"},null,l,a)):t("\x3c!----\x3e"),t(`<div class="va-modal__inner" style="${S({maxWidth:e.$props.maxWidth,maxHeight:e.$props.maxHeight})}"${a}>`),e.title?t(`<div class="va-modal__title" style="${S({color:e.getColor("primary")})}"${a}>${L(e.$props.title)}</div>`):t("\x3c!----\x3e"),e.$slots.header?(t(`<div class="va-modal__header"${a}>`),E(e.$slots,"header",{},null,t,l,a),t("</div>")):t("\x3c!----\x3e"),e.$props.message?t(`<div class="va-modal__message"${a}>${L(e.$props.message)}</div>`):t("\x3c!----\x3e"),e.$slots.default?(t(`<div class="va-modal__message"${a}>`),E(e.$slots,"default",{},null,t,l,a),t("</div>")):t("\x3c!----\x3e"),!e.$props.cancelText&&!e.$props.okText||e.$props.hideDefaultActions?t("\x3c!----\x3e"):(t(`<div class="va-modal__footer"${a}>`),e.$props.cancelText?t(B(h,{color:"gray",class:"mr-2",flat:""},{default:d(((o,t,l,a)=>{if(!t)return[m(c(e.$props.cancelText),1)];t(`${L(e.$props.cancelText)}`)})),_:1},l,a)):t("\x3c!----\x3e"),t(B(h,null,{default:d(((o,t,l,a)=>{if(!t)return[m(c(e.$props.okText),1)];t(`${L(e.$props.okText)}`)})),_:1},l,a)),t("</div>")),e.$slots.footer?(t(`<div class="va-modal__footer"${a}>`),E(e.$slots,"footer",{},null,t,l,a),t("</div>")):t("\x3c!----\x3e"),t("</div></div></div></div>")):t("\x3c!----\x3e")})),_:3},t))}),e.attachElement,e.$props.disableAttachment,t),o("</div>")},w.__file="src/components/va-modal/VaModal.vue";var D=e(w);export{D as default};
//# sourceMappingURL=index33.js.map
