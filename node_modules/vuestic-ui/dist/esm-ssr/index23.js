import{w as e}from"./withConfigTransport.js";import{computed as t,ref as o,watch as n,defineComponent as r,toRefs as a,resolveComponent as l,mergeProps as s,withCtx as i,toHandlers as u,createSlots as p,renderSlot as c,openBlock as m,createBlock as d,createCommentVNode as v,withModifiers as f,renderList as y,createVNode as C}from"vue";import{u as k,a as j}from"./VaInput.js";import{u as V,a as $}from"./index66.js";import{u as P,b as I}from"./useStateful.js";import{s as D,i as g,a as h,b as x}from"./VaDatePicker.js";import{e as w,a as _,f as S}from"./child-props.js";import b,{VaDropdownContent as B}from"./index25.js";import H from"./index31.js";import T from"./index28.js";import{ssrRenderAttrs as L,ssrRenderComponent as U,ssrRenderSlot as F}from"@vue/server-renderer";import"./VaConfig.js";import"./global-config.js";import"./useForm.js";import"cleave.js";import"./useFocus.js";import"./useEmitProxy.js";import"./VaInputWrapper.js";import"./color-config.js";import"colortranslator";import"./pick.js";import"./VaIcon.js";import"./isSymbol.js";import"./flatten.js";import"./useSize.js";import"./useSyncProp.js";import"./consts.js";import"./useColor.js";import"./index9.js";import"./VaButton.js";import"./useTextColor.js";import"./useRouterLink.js";import"./useLoading.js";import"./index39.js";import"./clamp.js";import"./toNumber.js";import"./VaDropdown.js";import"./debounce.js";import"./ssr-utils.js";import"./VaMessageListWrapper.js";var O=function isNil(e){return null==e};const defaultParseDateFunction=e=>new Date(Date.parse(e)),useDateParser=e=>{const t=o(!0),parseDate=o=>{const n=(e.parseDate||defaultParseDateFunction)(o);var r;return t.value=(r=n)instanceof Date&&!isNaN(r.getTime()),n};return{parseDateInputValue:o=>{if(t.value=!0,e.parse)return e.parse(o,t);if((t=>t.includes(e.delimiter))(o))return o.split(e.delimiter).map(parseDate);if((t=>t.includes(e.rangeDelimiter))(o)){const[t,n]=o.split(e.rangeDelimiter).map(parseDate);return{start:t,end:n}}return parseDate(o)},isValid:t}},isRange=e=>"object"==typeof e&&("start"in e||"end"in e),parseSingleDate=e=>"string"==typeof e?defaultParseDateFunction(e):new Date(e),parseModelValue=e=>Array.isArray(e)?e.map(parseSingleDate):isRange(e)?{start:O(e.start)?e.start:parseSingleDate(e.start),end:O(e.end)?e.end:parseSingleDate(e.end)}:parseSingleDate(e),useRangeModelValueGuard=(e,r,a=parseModelValue)=>{const l=o(e.value&&a(e.value)),s=t({get:()=>l.value,set:t=>{r.value&&(e.value=t),t?(isRange(t)?null!==t.end&&(e.value=t):e.value=t,l.value=t):e.value=t}});n(e,(e=>{l.value=e}));return{valueComputed:s,reset:()=>{l.value&&isRange(l.value)&&(l.value=e.value&&a(e.value))}}},R=w(H,["mask","returnRaw","autosize","minRows","maxRows","type","inputmode"]);var E=r({name:"VaDateInput",components:{VaDropdown:b,VaDropdownContent:B,VaDatePicker:D,VaInput:H,VaIcon:T},props:{...R,...w(D),clearValue:{type:Date,default:void 0},resetOnClose:{type:Boolean,default:!0},isOpen:{type:Boolean,default:void 0},format:{type:Function},formatDate:{type:Function,default:e=>e.toLocaleDateString()},parse:{type:Function},parseDate:{type:Function},parseValue:{type:Function},delimiter:{type:String,default:", "},rangeDelimiter:{type:String,default:" ~ "},manualInput:{type:Boolean,default:!1},color:{type:String,default:"primary"},leftIcon:{type:Boolean,default:!1},icon:{type:String,default:"calendar_today"}},emits:[..._(D),...k,...V,...P,"update:is-open","update:text"],setup(e,{emit:r,slots:l}){const{isOpen:s,resetOnClose:i}=a(e),{valueComputed:u}=I(e,r),{syncProp:p}=function useSyncProp(e,n,r,a){if(void 0===a)return{syncProp:t({set(e){r(`update:${n}`,e)},get:()=>e.value})};const l=o(a);return{syncProp:t({set(e){l.value=e,r(`update:${n}`,e)},get:()=>void 0===(null==e?void 0:e.value)?l.value:e.value})}}(s,"is-open",r,!1),c=t((()=>!i.value)),{valueComputed:m,reset:d}=useRangeModelValueGuard(u,c,e.parseValue);n(p,(e=>{e||c.value||d()}));const dateOrNothing=t=>t?e.formatDate(t):"...",v=o(),{parseDateInputValue:f,isValid:y}=useDateParser(e),modelValueToString=t=>{if(e.format)return e.format(m.value);if(g(t))return t.map((t=>e.formatDate(t))).join(e.delimiter);if(h(t))return e.formatDate(t);if(x(t))return dateOrNothing(t.start)+e.rangeDelimiter+dateOrNothing(t.end);throw new Error("VaDatePicker: Invalid model value. Value should be Date, Date[] or { start: Date, end: Date | null }")},C=t((()=>y.value?m.value?modelValueToString(m.value):e.clearValue?modelValueToString(e.clearValue):"":"")),reset=()=>{u.value=e.clearValue,r("clear")},focus=()=>{var e;null===(e=v.value)||void 0===e||e.focus()},{computedError:k,computedErrorMessages:V,listeners:P}=$(e,r,reset,focus),_=t((()=>!y.value&&m.value!==e.clearValue||k.value)),b=t((()=>{const t=[e.leftIcon&&"prependInner",(!e.leftIcon||e.clearable)&&"icon"];return Object.keys(l).filter((e=>!t.includes(e)))})),{canBeCleared:B,clearIconProps:H,onFocus:T,onBlur:L}=j(e,m),U=t((()=>({name:e.icon,color:e.color,size:"small",class:"va-date-input__icon"}))),F=t((()=>({...S(e,R).value,clearable:!1,rules:[],error:_.value,errorMessages:V.value,readonly:e.readonly||!e.manualInput}))),O=t((()=>({focus:()=>{T(),P.onFocus()},blur:()=>{L(),P.onBlur()}})));return{valueText:C,valueComputed:m,isOpenSync:p,onInputTextChanged:({target:e})=>{const t=f(e.value);y.value&&(m.value=t)},input:v,inputProps:F,inputListeners:O,datePickerProps:S(e,w(D)),filterSlots:b,canBeCleared:B,clearIconProps:H,iconProps:U,reset:reset,focus:focus,blur:()=>{var e;null===(e=v.value)||void 0===e||e.blur()}}}});E.ssrRender=function ssrRender(e,t,o,n,r,a,k,j){const V=l("va-dropdown"),$=l("va-input"),P=l("va-icon"),I=l("va-dropdown-content"),D=l("va-date-picker");t(`<div${L(s({class:"va-date-input"},n))}>`),t(U(V,{modelValue:e.isOpenSync,"onUpdate:modelValue":t=>e.isOpenSync=t,offset:[2,0],"close-on-content-click":!1,disabled:e.disabled,anchorSelector:".va-input-wrapper__input"},{anchor:i(((t,o,n,r)=>{if(!o)return[c(e.$slots,"input",{valueText:e.valueText,inputProps:e.inputProps,inputListeners:e.inputListeners},(()=>[C($,s({ref:"input",class:"va-date-input__input"},e.inputProps,u(e.inputListeners),{"model-value":e.valueText,onChange:e.onInputTextChanged}),p({prependInner:i((t=>[c(e.$slots,"prependInner",t),e.$props.leftIcon?(m(),d(P,s({key:0},e.iconProps),null,16)):v("v-if",!0)])),icon:i((()=>[e.canBeCleared?(m(),d(P,s({key:0},e.clearIconProps,{onClick:f((t=>e.reset()),["stop"])}),null,16,["onClick"])):e.$props.leftIcon?v("v-if",!0):(m(),d(P,s({key:1},e.iconProps),null,16))])),_:2},[y(e.filterSlots,(t=>({name:t,fn:i((o=>[c(e.$slots,t,o)]))})))]),1040,["model-value","onChange"])]))];F(e.$slots,"input",{valueText:e.valueText,inputProps:e.inputProps,inputListeners:e.inputListeners},(()=>{o(U($,s({ref:"input",class:"va-date-input__input"},e.inputProps,u(e.inputListeners),{"model-value":e.valueText}),p({prependInner:i(((t,o,n,r)=>{if(!o)return[c(e.$slots,"prependInner",t),e.$props.leftIcon?(m(),d(P,s({key:0},e.iconProps),null,16)):v("v-if",!0)];F(e.$slots,"prependInner",t,null,o,n,r),e.$props.leftIcon?o(U(P,e.iconProps,null,n,r)):o("\x3c!----\x3e")})),icon:i(((t,o,n,r)=>{if(!o)return[e.canBeCleared?(m(),d(P,s({key:0},e.clearIconProps,{onClick:f((t=>e.reset()),["stop"])}),null,16,["onClick"])):e.$props.leftIcon?v("v-if",!0):(m(),d(P,s({key:1},e.iconProps),null,16))];e.canBeCleared?o(U(P,e.clearIconProps,null,n,r)):e.$props.leftIcon?o("\x3c!----\x3e"):o(U(P,e.iconProps,null,n,r))})),_:2},[y(e.filterSlots,(t=>({name:t,fn:i(((o,n,r,a)=>{if(!n)return[c(e.$slots,e.name,o)];F(e.$slots,t,o,null,n,r,a)}))})))]),n,r))}),o,n,r)})),default:i(((t,o,n,r)=>{if(!o)return[C(I,null,{default:i((()=>[C(D,s(e.datePickerProps,{modelValue:e.valueComputed,"onUpdate:modelValue":t=>e.valueComputed=t,"onClick:day":t=>e.$emit("click:day",t),"onClick:month":t=>e.$emit("click:month",t),"onClick:year":t=>e.$emit("click:year",t),"onHover:day":t=>e.$emit("hover:day",t),"onHover:month":t=>e.$emit("hover:month",t),"onHover:year":t=>e.$emit("hover:year",t),"onUpdate:view":t=>e.$emit("update:view",t)}),p({_:2},[y(e.$slots,((t,o)=>({name:o,fn:i((t=>[c(e.$slots,o,t)]))})))]),1040,["modelValue","onUpdate:modelValue","onClick:day","onClick:month","onClick:year","onHover:day","onHover:month","onHover:year","onUpdate:view"])])),_:3})];o(U(I,null,{default:i(((t,o,n,r)=>{if(!o)return[C(D,s(e.datePickerProps,{modelValue:e.valueComputed,"onUpdate:modelValue":t=>e.valueComputed=t,"onClick:day":t=>e.$emit("click:day",t),"onClick:month":t=>e.$emit("click:month",t),"onClick:year":t=>e.$emit("click:year",t),"onHover:day":t=>e.$emit("hover:day",t),"onHover:month":t=>e.$emit("hover:month",t),"onHover:year":t=>e.$emit("hover:year",t),"onUpdate:view":t=>e.$emit("update:view",t)}),p({_:2},[y(e.$slots,((t,o)=>({name:o,fn:i((t=>[c(e.$slots,o,t)]))})))]),1040,["modelValue","onUpdate:modelValue","onClick:day","onClick:month","onClick:year","onHover:day","onHover:month","onHover:year","onUpdate:view"])];o(U(D,s(e.datePickerProps,{modelValue:e.valueComputed,"onUpdate:modelValue":t=>e.valueComputed=t}),p({_:2},[y(e.$slots,((t,o)=>({name:o,fn:i(((t,n,r,a)=>{if(!n)return[c(e.$slots,e.name,t)];F(e.$slots,o,t,null,n,r,a)}))})))]),n,r))})),_:3},n,r))})),_:3},o)),t("</div>")},E.__file="src/components/va-date-input/VaDateInput.vue";const N=e(E);export{N as VaDateInput};
//# sourceMappingURL=index23.js.map
