import{w as e}from"./withConfigTransport.js";import{defineComponent as o,ref as t,computed as a,watch as l,h as n,Transition as s,resolveComponent as i,openBlock as r,createElementBlock as d,normalizeClass as m,renderSlot as u,normalizeProps as c,guardReactiveProps as p,createCommentVNode as v,createBlock as f,Teleport as y,createVNode as g,mergeProps as h,withCtx as k,normalizeStyle as C,createElementVNode as T,toDisplayString as b,createTextVNode as E}from"vue";import{u as x,a as _,b as B}from"./useStateful.js";import{u as $}from"./color-config.js";import{u as S}from"./useTextColor.js";import L from"./index9.js";import j from"./index28.js";import"./VaConfig.js";import"./global-config.js";import"colortranslator";import"./VaButton.js";import"./useColor.js";import"./useRouterLink.js";import"./useSize.js";import"./useLoading.js";import"./index39.js";import"./clamp.js";import"./toNumber.js";import"./isSymbol.js";import"./VaIcon.js";import"./flatten.js";const A=o({name:"ModalElement",inheritAttrs:!1,props:{isTransition:{type:Boolean,default:!0}},setup:(e,{slots:o,attrs:t})=>()=>{var a;return e.isTransition?n(s,{...t},o):null===(a=o.default)||void 0===a?void 0:a.call(o,t)}});var w=o({name:"VaModal",inheritAttrs:!1,components:{VaButton:L,VaIcon:j,ModalElement:A},emits:[...x,"cancel","ok","before-open","open","before-close","close","click-outside"],props:{..._,modelValue:{type:Boolean,default:!1},attachElement:{type:String,default:"body"},disableAttachment:{type:Boolean,default:!1},title:{type:String,default:""},message:{type:String,default:""},okText:{type:String,default:"OK"},cancelText:{type:String,default:"Cancel"},hideDefaultActions:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},mobileFullscreen:{type:Boolean,default:!0},noDismiss:{type:Boolean,default:!1},noOutsideDismiss:{type:Boolean,default:!1},noEscDismiss:{type:Boolean,default:!1},maxWidth:{type:String,default:""},maxHeight:{type:String,default:""},anchorClass:{type:String},size:{type:String,default:"medium",validator:e=>["medium","small","large"].includes(e)},fixedLayout:{type:Boolean,default:!1},withoutTransitions:{type:Boolean,default:!1},overlay:{type:Boolean,default:!0},overlayOpacity:{type:[Number,String],default:.6},blur:{type:Boolean,default:!1},zIndex:{type:[Number,String],default:void 0},backgroundColor:{type:String,default:"white"}},setup(e,{emit:o}){const{getColor:n}=$(),{textColorComputed:s}=S(e.backgroundColor),i=t(),r=t(),{valueComputed:d}=B(e,o),m=a((()=>({"va-modal--fullscreen":e.fullscreen,"va-modal--mobile-fullscreen":e.mobileFullscreen,"va-modal--fixed-layout":e.fixedLayout,[`va-modal--size-${e.size}`]:"medium"!==e.size}))),u=a((()=>({"z-index":e.zIndex}))),c=a((()=>({maxWidth:e.maxWidth,maxHeight:e.maxHeight,color:s.value,background:n(e.backgroundColor)}))),p=a((()=>{const o=!!document.querySelectorAll(".va-modal__overlay").length;if(e.overlay&&!o)return{"background-color":`rgba(0, 0, 0, ${e.overlayOpacity})`,"z-index":e.zIndex&&Number(e.zIndex)-1}})),hide=()=>{d.value=!1},cancel=()=>{hide(),o("cancel")},listenKeyUp=o=>{o.modalsCounter=o.modalsCounter?o.modalsCounter+1:1;const t=o.modalsCounter;setTimeout((()=>{"Escape"!==o.code||e.noEscDismiss||e.noDismiss||o.modalsCounter!==t||cancel()}))};l(d,(o=>{o?window.addEventListener("keyup",listenKeyUp):window.removeEventListener("keyup",listenKeyUp),e.blur&&(o?document.body.classList.add("va-modal-overlay-background--blurred"):document.body.classList.remove("va-modal-overlay-background--blurred"))}));const v={show:()=>{d.value=!0},hide:hide,toggle:()=>{d.value=!d.value},cancel:cancel,ok:()=>{hide(),o("ok")},onOutsideClick:()=>{e.noOutsideDismiss||e.noDismiss||(o("click-outside"),cancel())},onBeforeEnterTransition:e=>o("before-open",e),onAfterEnterTransition:e=>o("open",e),onBeforeLeaveTransition:e=>o("before-close",e),onAfterLeaveTransition:e=>o("close",e),listenKeyUp:listenKeyUp};return{getColor:n,rootElement:i,modal:r,valueComputed:d,computedClass:m,computedDialogStyle:c,computedModalContainerStyle:u,computedOverlayStyles:p,...v}},methods:{show(){var e;null===(e=this.rootElement)||void 0===e||e.show()},hide(){var e;null===(e=this.rootElement)||void 0===e||e.hide()},toggle(){var e;null===(e=this.rootElement)||void 0===e||e.toggle()},cancel(){var e;null===(e=this.rootElement)||void 0===e||e.cancel()},ok(){var e;null===(e=this.rootElement)||void 0===e||e.ok()},onOutsideClick(){var e;null===(e=this.rootElement)||void 0===e||e.onOutsideClick()},onBeforeEnterTransition(){var e;null===(e=this.rootElement)||void 0===e||e.onBeforeEnterTransition()},onAfterEnterTransition(){var e;null===(e=this.rootElement)||void 0===e||e.onAfterEnterTransition()},onBeforeLeaveTransition(){var e;null===(e=this.rootElement)||void 0===e||e.onBeforeLeaveTransition()},onAfterLeaveTransition(){var e;null===(e=this.rootElement)||void 0===e||e.onAfterLeaveTransition()},listenKeyUp(){var e;null===(e=this.rootElement)||void 0===e||e.listenKeyUp()}}});const O={key:0,class:"va-modal__anchor"},z={key:0,class:"va-modal"},D={key:1,class:"va-modal__header"},V={key:2,class:"va-modal__message"},I={key:3,class:"va-modal__message"},M={key:4,class:"va-modal__footer"},H={key:5,class:"va-modal__footer"};w.render=function render(e,o,t,a,l,n){const s=i("va-icon"),x=i("va-button"),_=i("modal-element");return r(),d("div",{ref:"rootElement",class:m(["va-modal-entry",e.$props.anchorClass])},[e.$slots.anchor?(r(),d("div",O,[u(e.$slots,"anchor",c(p({show:e.show,hide:e.hide,toggle:e.toggle})))])):v("v-if",!0),(r(),f(y,{to:e.attachElement,disabled:e.$props.disableAttachment},[g(_,h({name:"va-modal",isTransition:!e.$props.withoutTransitions,appear:"",duration:300},e.$attrs),{default:k((()=>[e.valueComputed?(r(),d("div",z,[e.$props.overlay?(r(),d("div",{key:0,class:"va-modal__overlay",style:C(e.computedOverlayStyles),onClick:o[0]||(o[0]=(...o)=>e.onOutsideClick&&e.onOutsideClick(...o))},null,4)):v("v-if",!0),T("div",{class:"va-modal__container",style:C(e.computedModalContainerStyle),onBeforeEnter:o[1]||(o[1]=(...o)=>e.onBeforeEnterTransition&&e.onBeforeEnterTransition(...o)),onAfterEnter:o[2]||(o[2]=(...o)=>e.onAfterEnterTransition&&e.onAfterEnterTransition(...o)),onBeforeLeave:o[3]||(o[3]=(...o)=>e.onBeforeLeaveTransition&&e.onBeforeLeaveTransition(...o)),onAfterLeave:o[4]||(o[4]=(...o)=>e.onAfterLeaveTransition&&e.onAfterLeaveTransition(...o))},[T("div",{class:m(["va-modal__dialog",e.computedClass]),style:C(e.computedDialogStyle)},[e.$props.fullscreen?(r(),f(s,{key:0,onClick:e.cancel,name:"close",class:"va-modal__close"},null,8,["onClick"])):v("v-if",!0),T("div",{class:"va-modal__inner",style:C({maxWidth:e.$props.maxWidth,maxHeight:e.$props.maxHeight})},[e.title?(r(),d("div",{key:0,class:"va-modal__title",style:C({color:e.getColor("primary")})},b(e.$props.title),5)):v("v-if",!0),e.$slots.header?(r(),d("div",D,[u(e.$slots,"header")])):v("v-if",!0),e.$props.message?(r(),d("div",V,b(e.$props.message),1)):v("v-if",!0),e.$slots.default?(r(),d("div",I,[u(e.$slots,"default")])):v("v-if",!0),!e.$props.cancelText&&!e.$props.okText||e.$props.hideDefaultActions?v("v-if",!0):(r(),d("div",M,[e.$props.cancelText?(r(),f(x,{key:0,color:"gray",class:"mr-2",flat:"",onClick:e.cancel},{default:k((()=>[E(b(e.$props.cancelText),1)])),_:1},8,["onClick"])):v("v-if",!0),g(x,{onClick:e.ok},{default:k((()=>[E(b(e.$props.okText),1)])),_:1},8,["onClick"])])),e.$slots.footer?(r(),d("div",H,[u(e.$slots,"footer")])):v("v-if",!0)],4)],6)],36)])):v("v-if",!0)])),_:3},16,["isTransition"])],8,["to","disabled"]))],2)},w.__file="src/components/va-modal/VaModal.vue";var W=e(w);export{W as default};
//# sourceMappingURL=index33.js.map
