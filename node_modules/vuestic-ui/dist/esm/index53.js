import{w as e}from"./withConfigTransport.js";import{ref as o,defineComponent as n,shallowRef as r,computed as t,watch as a,nextTick as s,resolveComponent as l,openBlock as p,createBlock as i,normalizeClass as u,normalizeStyle as d,withKeys as c,withModifiers as m,withCtx as v,createVNode as f,mergeProps as w,toHandlers as I,createSlots as V,renderSlot as g,normalizeProps as j,guardReactiveProps as y,createCommentVNode as h,renderList as k}from"vue";import{s as C,o as S}from"./VaIcon.js";import{s as b}from"./VaTimePicker.js";import{s as D,u as T,a as P}from"./VaInput.js";import _,{VaDropdownContent as O}from"./index25.js";import{u as x}from"./useSyncProp.js";import{u as B,a as $}from"./index66.js";import{e as F,f as L}from"./child-props.js";import{g as M}from"./utils.js";import"./VaConfig.js";import"./global-config.js";import"./isSymbol.js";import"./flatten.js";import"./color-config.js";import"colortranslator";import"./useSize.js";import"./useFocus.js";import"./useStateful.js";import"./useForm.js";import"./useArrayRefs.js";import"cleave.js";import"./useEmitProxy.js";import"./VaInputWrapper.js";import"./pick.js";import"./VaDropdown.js";import"./debounce.js";import"./toNumber.js";import"./ssr-utils.js";import"./useTextColor.js";import"./consts.js";import"./useColor.js";const defaultParseDateFunction=e=>{const o=new Date,[n,r,t]=(e=>{const o=e.match(/[0-9]{1,2}/g);return o?o.map((e=>Number(e))):[]})(e),a=(e=>{const o=e.match(/pm|am/i);return o?Number("pm"===o[0].toLowerCase()):null})(e);if(!n)return null;const s=null!==a&&n<=12,l=s&&!!a,p=s&&12===n?0:n;return o.setHours(Math.min(p||0,s?12:24)+(l?12:0)),o.setMinutes(Math.min(r||0,60)),o.setSeconds(Math.min(t||0,60)),o},useTimeParser=e=>{const n=o(!0),parseDate=o=>{const r=(e.parse||defaultParseDateFunction)(o);return r||(n.value=!1),r};return{parse:e=>(n.value=!0,parseDate(e)),isValid:n}},U=[".va-input-wrapper__prepend-inner",".va-input__prepend-inner",".va-input__append-inner",".va-input-wrapper__append-inner"],A=F(D,["mask","returnRaw","autosize","minRows","maxRows","type","inputmode"]);var R=n({name:"VaTimeInput",components:{VaDropdown:_,VaDropdownContent:O,VaTimePicker:b,VaIcon:C,VaInput:D},emits:[...B,...T,"update:modelValue","update:isOpen"],props:{...A,...F(b),isOpen:{type:Boolean,default:void 0},modelValue:{type:Date,default:void 0},clearValue:{type:String,default:void 0},format:{type:Function},parse:{type:Function},manualInput:{type:Boolean,default:!1},leftIcon:{type:Boolean,default:!1},icon:{type:String,default:"schedule"}},inheritAttrs:!1,setup(e,{emit:o,attrs:n,slots:l}){const p=r(),i=r(),u=M(),d=M(),[c]=x("isOpen",e,o,!1),[m]=x("modelValue",e,o),{parse:v,isValid:f}=useTimeParser(e),{format:w}=(e=>{const formatDate=o=>o?e.ampm?o.toLocaleTimeString("en-US"):o.toLocaleTimeString("en-GB"):"",sliceTime=(e,o,n)=>e.split(":").slice(o,n).join(":");return{format:o=>{if("seconds"===e.view)return formatDate(o);const[n,r]=formatDate(o).split(" ");return"minutes"===e.view?r?[sliceTime(n,0,2),r].join(" "):sliceTime(n,0,2):"hours"===e.view?r?[sliceTime(n,0,1),r].join(" "):sliceTime(n,0,1):""}}})(e),I=t((()=>f.value&&m.value?e.format?e.format(m.value):w(m.value):e.clearValue)),reset=()=>{o("update:modelValue",e.clearValue),o("clear")},focus=()=>{var e;null===(e=p.value)||void 0===e||e.focus()},{computedError:V,computedErrorMessages:g,listeners:j}=$(e,o,reset,focus),y=t((()=>!f.value&&I.value!==e.clearValue||V.value)),{canBeCleared:h,clearIconProps:k,onFocus:C,onBlur:D}=P(e,I),T=t((()=>({name:e.icon,color:e.color,size:"small"}))),_=t((()=>({...L(e,A).value,clearable:!1,rules:[],error:y.value,errorMessages:g.value,readonly:e.readonly||!e.manualInput}))),O=t((()=>({focus:()=>{C(),j.onFocus()},blur:()=>{D(),j.onBlur()}}))),B=t((()=>({ariaLabel:e.label,...S(n,["class","style"])}))),R=t((()=>{const o=[e.leftIcon&&"prependInner",(!e.leftIcon||e.clearable)&&"icon"];return Object.keys(l).filter((e=>!o.includes(e)))}));a(m,(()=>{f.value=!0}));const hideDropdown=()=>{c.value=!1,focus()},showDropdown=()=>{e.disabled||e.readonly||(c.value=!0,s((()=>{var e;null===(e=i.value)||void 0===e||e.focus()})))},dropdownToggle=()=>{c.value?hideDropdown():showDropdown()};return{input:p,timePicker:i,clearIconId:u,componentIconId:d,timePickerProps:L(e,F(b)),computedInputProps:_,computedInputAttrs:B,computedInputListeners:O,isOpenSync:c,modelValueSync:m,valueText:I,onInputTextChanged:e=>{const o=v(e);f.value&&o&&(m.value=o)},onValueInput:e=>{!e&&reset()},canBeCleared:h,iconProps:T,clearIconProps:k,filterSlots:R,hideDropdown:hideDropdown,showDropdown:showDropdown,dropdownToggle:dropdownToggle,handleComponentClick:o=>{var n,r;const t=null===(n=o.target)||void 0===n?void 0:n.id;if(t===u)return focus();if(t===d)return null===(r=i.value)||void 0===r?void 0:r.focus();return U.some((e=>{var n;return!!(null===(n=o.target)||void 0===n?void 0:n.closest(e))}))?void 0:e.manualInput?c.value&&hideDropdown():void dropdownToggle()},reset:reset,focus:focus,blur:()=>{var e;null===(e=p.value)||void 0===e||e.blur()}}}});R.render=function render(e,o,n,r,t,a){const s=l("va-icon"),C=l("va-input"),S=l("va-time-picker"),b=l("va-dropdown-content"),D=l("va-dropdown");return p(),i(D,{class:u(["va-time-input",e.$attrs.class]),style:d(e.$attrs.style),modelValue:e.isOpenSync,"onUpdate:modelValue":o[6]||(o[6]=o=>e.isOpenSync=o),placement:"bottom-start",offset:[2,0],"close-on-content-click":!1,disabled:e.$props.disabled,anchorSelector:".va-input__container",stateful:!1,trigger:"none",onKeydown:[o[7]||(o[7]=c(m((o=>e.showDropdown()),["prevent"]),["up"])),o[8]||(o[8]=c(m((o=>e.showDropdown()),["prevent"]),["down"])),o[9]||(o[9]=c(m((o=>e.showDropdown()),["prevent"]),["space"]))],onClick:e.handleComponentClick},{anchor:v((()=>[f(C,w({ref:"input"},{...e.computedInputProps,...e.computedInputAttrs},I(e.computedInputListeners),{modelValue:e.valueText,onChange:o[3]||(o[3]=o=>e.onInputTextChanged(o.target.value)),"onUpdate:modelValue":e.onValueInput}),V({prependInner:v((n=>[g(e.$slots,"prependInner",j(y({...n,dropdownToggle:e.dropdownToggle,showDropdown:e.showDropdown,hideDropdown:e.hideDropdown,isOpen:e.isOpenSync,focus:e.focus}))),e.$props.leftIcon?(p(),i(s,w({key:0,id:e.componentIconId},e.iconProps,{onClick:o[0]||(o[0]=o=>e.dropdownToggle())}),null,16,["id"])):h("v-if",!0)])),icon:v((()=>[e.canBeCleared?(p(),i(s,w({key:0,id:e.clearIconId},e.clearIconProps,{onClick:o[1]||(o[1]=o=>e.reset())}),null,16,["id"])):e.$props.leftIcon?h("v-if",!0):(p(),i(s,w({key:1,id:e.componentIconId},e.iconProps,{onClick:o[2]||(o[2]=o=>e.dropdownToggle())}),null,16,["id"]))])),_:2},[k(e.filterSlots,(o=>({name:o,fn:v((n=>[g(e.$slots,o,j(y({...n,dropdownToggle:e.dropdownToggle,showDropdown:e.showDropdown,hideDropdown:e.hideDropdown,isOpen:e.isOpenSync,focus:e.focus})))]))})))]),1040,["modelValue","onUpdate:modelValue"])])),default:v((()=>[f(b,{"no-padding":"",onKeydown:o[5]||(o[5]=c(m((o=>e.hideDropdown()),["prevent"]),["esc"]))},{default:v((()=>[f(S,w({ref:"timePicker"},e.timePickerProps,{modelValue:e.modelValueSync,"onUpdate:modelValue":o[4]||(o[4]=o=>e.modelValueSync=o)}),null,16,["modelValue"])])),_:1})])),_:3},8,["class","style","modelValue","disabled","onClick"])},R.__file="src/components/va-time-input/VaTimeInput.vue";const z=e(R);export{z as VaTimeInput};
//# sourceMappingURL=index53.js.map
