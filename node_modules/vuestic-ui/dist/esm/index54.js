import{w as e}from"./withConfigTransport.js";import{computed as t,onMounted as o,onBeforeUnmount as r,ref as i,watch as a,defineComponent as s,resolveComponent as l,openBlock as n,createElementBlock as u,normalizeClass as c,normalizeStyle as d,Fragment as v,renderSlot as m,createVNode as p,withCtx as f,createCommentVNode as h,renderList as g,mergeProps as y,normalizeProps as _,guardReactiveProps as S,createTextVNode as x,toDisplayString as C,createElementVNode as j}from"vue";import{u as w}from"./color-config.js";import{a as T,u as B,b as A}from"./useStateful.js";import $ from"./index29.js";import k from"./index9.js";import"./VaConfig.js";import"./global-config.js";import"colortranslator";import"./VaButton.js";import"./useTextColor.js";import"./useColor.js";import"./useRouterLink.js";import"./useSize.js";import"./useLoading.js";import"./index28.js";import"./VaIcon.js";import"./isSymbol.js";import"./flatten.js";import"./index39.js";import"./clamp.js";import"./toNumber.js";const useCarouselAnimation=(e,s)=>{let l=-1,n=1;const start=()=>{e.autoscroll&&(clearInterval(l),l=setInterval((()=>{e.infinite?(s.value+=1,s.value>=e.items.length&&(s.value=0)):(s.value<=0&&(n=1),s.value>=e.items.length-1&&(n=-1),s.value+=n)}),e.autoscrollInterval))};let u;const pause=()=>{e.autoscroll&&(clearInterval(l),u=setTimeout((()=>{start(),clearTimeout(u)}),e.autoscrollPauseDuration))},stop=()=>{clearInterval(l),clearTimeout(u)};o((()=>start())),r((()=>stop()));const c=i({transition:void 0}),d=i(0),v=t((()=>"fade"===e.effect?{...c.value,transition:"none"}:e.vertical?{...c.value,transform:`translateY(${-100*d.value}%)`}:{...c.value,transform:`translateX(${-100*d.value}%)`})),m={isAnimating:!1,speed:.3,order:[],move(t,o){const r=e.items.length-1,i=e.items.length;0===o&&t===r?(this.order.push({to:i}),this.order.push({to:0,animate:!1})):o===r&&0===t?(this.order.push({to:i,animate:!1}),this.order.push({to:o})):this.order.push({to:o}),this.isAnimating||this.runAnimation()},runAnimation(){this.isAnimating=!0;const e=this.order.shift();e?(d.value=null==e?void 0:e.to,e.animate||void 0===e.animate?(c.value.transition=`all ${this.speed}s linear`,setTimeout((()=>{this.runAnimation()}),1e3*this.speed)):(c.value.transition="none",setTimeout((()=>{this.runAnimation()}),16))):this.isAnimating=!1}};a(s,((e,t)=>{m.move(t,e)}));const p=t((()=>"fade"===e.effect?[e.items[s.value]]:e.infinite?[...e.items,e.items[0]]:e.items));return{start:start,pause:pause,stop:stop,withPause:e=>(...t)=>{pause(),e(...t)},computedSlidesStyle:v,slides:p}},useCarouselColor=()=>{const{setHSLAColor:e,getColor:o}=w();return{computedColor:t((()=>e(o("dark"),{a:.7}))),computedHoverColor:t((()=>e(o("primary"),{a:.7}))),computedActiveColor:t((()=>o("primary")))}};var V=s({name:"VaCarousel",components:{VaImage:$,VaButton:k},props:{...T,modelValue:{type:Number,default:0},items:{type:Array,required:!0},autoscroll:{type:Boolean,default:!1},autoscrollInterval:{type:Number,default:1e3},autoscrollPauseDuration:{type:Number,default:2e3},infinite:{type:Boolean,default:!1},fadeKeyframe:{type:String,default:"va-carousel-fade-appear 1s"},arrows:{type:Boolean,default:!0},indicators:{type:Boolean,default:!0},indicatorTrigger:{type:String,default:"click"},vertical:{type:Boolean,default:!1},height:{type:String,default:"300px"},effect:{type:String,default:"transition"},color:{type:String,default:"primary"}},emits:B,setup(e,{emit:o}){const{valueComputed:r}=A(e,o,0),{goTo:i,next:a,prev:s,doShowNextButton:l,doShowPrevButton:n}=((e,o)=>({doShowPrevButton:t((()=>o.value>0||e.infinite)),doShowNextButton:t((()=>o.value<e.items.length-1||e.infinite)),goTo:e=>{o.value=e},prev:()=>{e.infinite&&o.value<=0?o.value=e.items.length-1:o.value-=1},next:()=>{e.infinite&&o.value>=e.items.length-1?o.value=0:o.value+=1}}))(e,r),{withPause:u,computedSlidesStyle:c,slides:d}=useCarouselAnimation(e,r);return{doShowNextButton:l,doShowPrevButton:n,computedSlidesStyle:c,goTo:u(i),prev:u(s),next:u(a),currentSlide:r,slides:d,...useCarouselColor()}}});const b={key:1,class:"va-carousel__indicators"},I={class:"va-carousel__content"};V.render=function render(e,t,o,r,i,a){const s=l("va-button"),w=l("va-hover"),T=l("va-image");return n(),u("div",{class:c(["va-carousel",{"va-carousel--vertical":e.$props.vertical,[`va-carousel--${e.$props.effect}`]:!0}]),style:d({height:e.height})},[e.$props.arrows?(n(),u(v,{key:0},[e.doShowPrevButton?(n(),u("div",{key:0,class:"va-carousel__arrow va-carousel__arrow--left",onClick:t[0]||(t[0]=(...t)=>e.prev&&e.prev(...t))},[m(e.$slots,"prev-arrow",{},(()=>[p(w,{stateful:""},{default:f((({hover:t})=>[p(s,{color:t?e.computedHoverColor:e.computedColor,icon:e.vertical?"expand_less":"chevron_left"},null,8,["color","icon"])])),_:1})]))])):h("v-if",!0),e.doShowNextButton?(n(),u("div",{key:1,class:"va-carousel__arrow va-carousel__arrow--right",onClick:t[1]||(t[1]=(...t)=>e.next&&e.next(...t))},[m(e.$slots,"prev-next",{},(()=>[p(w,{stateful:""},{default:f((({hover:t})=>[p(s,{color:t?e.computedHoverColor:e.computedColor,icon:e.vertical?"expand_more":"chevron_right"},null,8,["color","icon"])])),_:1})]))])):h("v-if",!0)],64)):h("v-if",!0),e.$props.indicators?(n(),u("div",b,[(n(!0),u(v,null,g(e.$props.items,((t,o)=>(n(),u("div",y({class:["va-carousel__indicator",{"va-carousel__indicator--active":o===e.modelValue}],key:o},"hover"===e.indicatorTrigger?{onmouseover:()=>e.goTo(o)}:{onclick:()=>e.goTo(o)}),[m(e.$slots,"indicator",_(S({item:t,index:o,goTo:e.goTo,isActive:o===e.currentSlide})),(()=>[p(w,{stateful:""},{default:f((({hover:t})=>[p(s,{round:"",color:o===e.currentSlide?e.computedActiveColor:t?e.computedHoverColor:e.computedColor},{default:f((()=>[x(C(o+1),1)])),_:2},1032,["color"])])),_:2},1024)]))],16)))),128))])):h("v-if",!0),j("div",I,[j("div",{class:"va-carousel__slides",style:d(e.computedSlidesStyle)},[(n(!0),u(v,null,g(e.slides,((t,o)=>(n(),u("div",{class:"va-carousel__slide",key:t,style:d("fade"===e.effect?{animation:e.fadeKeyframe}:"")},[m(e.$slots,"default",_(S({item:t,index:o,goTo:e.goTo,isActive:o===e.currentSlide})),(()=>[p(T,{src:t},null,8,["src"])]))],4)))),128))],4)])],6)},V.__file="src/components/va-carousel/VaCarousel.vue";const N=e(V);export{N as VaCarousel};
//# sourceMappingURL=index54.js.map
